import{u as Te,a as Oe,j as e,i as ae,c as C}from"./index-CciZrgyL.js";import{r as m}from"./vendor-react-DMwujlca.js";import{T as le,j as Ee,L as Be,az as Pe,R as Ae,S as Re,C as A,O as R,c as L,aA as ze,aB as Le,aC as H,aD as X,aE as U,P as V,aF as Me,s as $e}from"./vendor-icons-mT05O4Nk.js";const Fe={Apple:{bg:"#18181b",text:"#fff",logo:"apple"},Samsung:{bg:"#2563eb",text:"#fff",logo:"samsung"},Xiaomi:{bg:"#ea580c",text:"#fff",logo:"xiaomi"},Huawei:{bg:"#dc2626",text:"#fff",logo:"huawei"},Honor:{bg:"#6d28d9",text:"#fff",logo:"honor"},Google:{bg:"#16a34a",text:"#fff",logo:"google"},Oppo:{bg:"#059669",text:"#fff",logo:"oppo"},OnePlus:{bg:"#dc2626",text:"#fff",logo:"oneplus"},Motorola:{bg:"#0891b2",text:"#fff",logo:"motorola"},Nothing:{bg:"#18181b",text:"#fff",logo:"nothing"},Realme:{bg:"#d97706",text:"#fff",logo:"realme"},Vivo:{bg:"#1d4ed8",text:"#fff",logo:"vivo"}},qe={bg:"#6d28d9",text:"#fff",logo:null},Ie=m.memo(function({slug:d,size:i=18}){const[u,w]=m.useState(!1);return!d||u?e.jsx(L,{className:"w-[18px] h-[18px] opacity-70"}):e.jsx("img",{src:`https://cdn.simpleicons.org/${d}/ffffff`,alt:"",width:i,height:i,className:"shrink-0",style:{filter:"brightness(1)",minWidth:i},loading:"lazy",onError:()=>w(!0)})}),De={Original:{color:"#047857",bg:"#ecfdf5",border:"#a7f3d0"},"Soft OLED":{color:"#6d28d9",bg:"#f5f3ff",border:"#c4b5fd"},OLED:{color:"#1d4ed8",bg:"#eff6ff",border:"#93c5fd"},Incell:{color:"#b45309",bg:"#fffbeb",border:"#fcd34d"},LCD:{color:"#52525b",bg:"#f4f4f5",border:"#d4d4d8"},Reconditionnee:{color:"#0e7490",bg:"#ecfeff",border:"#67e8f9"},Compatible:{color:"#be123c",bg:"#fff1f2",border:"#fda4af"}},He={color:"#52525b",bg:"#f4f4f5",border:"#d4d4d8"},G=["Apple","Samsung","Xiaomi","Huawei","Honor","Google","Oppo","OnePlus","Motorola","Nothing","Realme","Vivo"],Xe=["Toutes",...G],Ue={ecran:L,batterie:H,connecteur:X,camera:U,vitre:V,"haut-parleur":$e,ecouteur:Me},z={batterie:{color:"#047857",bg:"#ecfdf5",border:"#a7f3d0"},"connecteur de charge":{color:"#1d4ed8",bg:"#eff6ff",border:"#93c5fd"},"camera arriere":{color:"#b45309",bg:"#fffbeb",border:"#fcd34d"},"vitre arriere":{color:"#7c3aed",bg:"#f5f3ff",border:"#c4b5fd"},"haut-parleur":{color:"#0f766e",bg:"#f0fdfa",border:"#99f6e4"},"ecouteur interne":{color:"#be185d",bg:"#fdf2f8",border:"#f9a8d4"},"vitre camera arriere":{color:"#4338ca",bg:"#eef2ff",border:"#a5b4fc"}},Ge={color:"#52525b",bg:"#f4f4f5",border:"#d4d4d8"};function ce(p){const d=(p||"").toLowerCase();for(const[i,u]of Object.entries(Ue))if(d.includes(i))return u;return V}function ie(p){const d=(p||"").toLowerCase();for(const[i,u]of Object.entries(z))if(d.includes(i))return u;return Ge}function j(p){return p==null?null:`${p} â‚¬`}const de=["17","16","15","14","13","12","11","SE","X/XS/XR","8","7"];function Ve(p){const d=p.match(/iPhone\s*(\d+|SE|X[SR]?)/i);if(!d)return"Autre";const i=d[1].toUpperCase();return["X","XS","XR"].includes(i)?"X/XS/XR":i}function Ke(p,d){const i=u=>/Pro Max/i.test(u)?0:/Pro/i.test(u)?1:/Plus/i.test(u)?2:/Mini/i.test(u)?3:4;return i(p)-i(d)}function Je(){const{user:p}=Te(),d=localStorage.getItem("klikphone_admin")==="true",{data:i,loading:u,isRevalidating:w,mutate:xe}=Oe("tarifs",async()=>{const[s,r,t]=await Promise.all([C.getTarifs(),C.getTarifsStats(),C.getAppleDevices().catch(()=>[])]);return{tarifs:s,stats:r,appleDevices:t||[]}},{tags:["tarifs"],ttl:3e5}),K=(i==null?void 0:i.tarifs)??[],y=(i==null?void 0:i.stats)??null,T=(i==null?void 0:i.appleDevices)??[],[k,me]=m.useState(""),[M,fe]=m.useState(""),O=m.useRef(null),[v,ue]=m.useState("Toutes"),[pe,E]=m.useState(new Set),[he,Y]=m.useState(new Set),[Q,$]=m.useState(new Set),[B,W]=m.useState(!1),[h,S]=m.useState(null),[b,be]=m.useState(!1);m.useEffect(()=>(O.current&&clearTimeout(O.current),O.current=setTimeout(()=>fe(k),300),()=>clearTimeout(O.current)),[k]);async function ge(s){try{const r=await C.toggleTarifStock(s);xe(t=>t&&{...t,tarifs:t.tarifs.map(n=>n.id===s?{...n,en_stock:r.en_stock}:n)})}catch(r){console.error("Erreur toggle stock:",r)}}async function je(){W(!0),S(null);try{const s=await C.checkTarifStock();S(s),ae("tarifs")}catch(s){console.error("Erreur check stock:",s),S({error:!0})}finally{W(!1)}}const J=m.useMemo(()=>{let s=K;if(v!=="Toutes"&&(s=s.filter(r=>r.marque===v)),M.trim()){const r=M.toLowerCase();s=s.filter(t=>(t.marque||"").toLowerCase().includes(r)||(t.modele||"").toLowerCase().includes(r)||(t.type_piece||"").toLowerCase().includes(r)||(t.qualite||"").toLowerCase().includes(r))}return s},[K,v,M]),g=m.useMemo(()=>{const s={};for(const t of J)s[t.marque]||(s[t.marque]={}),s[t.marque][t.modele]||(s[t.marque][t.modele]=[]),s[t.marque][t.modele].push(t);return Object.keys(s).sort((t,n)=>{const c=G.indexOf(t),l=G.indexOf(n);return c>=0&&l>=0?c-l:c>=0?-1:l>=0?1:t.localeCompare(n)}).map(t=>({brand:t,models:Object.entries(s[t]).sort(([n],[c])=>n.localeCompare(c)).map(([n,c])=>({model:n,items:c}))}))},[J]),P=m.useMemo(()=>{const s=g.find(t=>t.brand==="Apple");if(!s)return[];const r={};for(const{model:t,items:n}of s.models){if(!t.toLowerCase().includes("iphone"))continue;const c=Ve(t);r[c]||(r[c]=[]),r[c].push({model:t,items:n})}for(const t of Object.keys(r))r[t].sort((n,c)=>Ke(n.model,c.model));return Object.entries(r).sort(([t],[n])=>{const c=de.indexOf(t),l=de.indexOf(n);return c>=0&&l>=0?c-l:c>=0?-1:l>=0?1:0}).map(([t,n])=>({serie:t,models:n}))},[g]),Z=m.useMemo(()=>{const s=g.find(r=>r.brand==="Apple");return s?s.models.filter(({model:r})=>!r.toLowerCase().includes("iphone")):[]},[g]),Ne=m.useMemo(()=>T.filter(s=>s.categorie==="ipad"),[T]),ve=m.useMemo(()=>T.filter(s=>s.categorie==="macbook"),[T]);m.useEffect(()=>{k.trim()&&E(new Set(g.map(s=>s.brand)))},[k,g]),m.useEffect(()=>{v!=="Toutes"&&E(new Set([v]))},[v]);function we(s){E(r=>{const t=new Set(r);return t.has(s)?t.delete(s):(t.add(s),s==="Apple"&&P.length>0&&$(n=>{const c=new Set(n);return c.add(`apple-serie-${P[0].serie}`),c})),t})}function ye(s){Y(r=>{const t=new Set(r);return t.has(s)?t.delete(s):t.add(s),t})}function ee(s){$(r=>{const t=new Set(r);return t.has(s)?t.delete(s):t.add(s),t})}function se({tarif:s}){const r=s.en_stock!==!1;return e.jsx("button",{onClick:t=>{t.stopPropagation(),ge(s.id)},className:`inline-flex items-center gap-1 text-[9px] font-bold px-1.5 py-0.5 rounded-md transition-all cursor-pointer ${r?"bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border border-emerald-200":"bg-red-50 text-red-600 hover:bg-red-100 border border-red-200"}`,title:r?"En stock":"Rupture",children:r?"En stock":"Rupture"})}function ke(s){const r=s.filter(o=>(o.type_piece||"").toLowerCase().includes("ecran")),t=new Set(r.map(o=>o.qualite).filter(Boolean)).size,n=o=>{const a=s.filter(f=>(f.type_piece||"").toLowerCase().includes(o));return a.length?Math.min(...a.map(f=>f.prix_client)):null},c=s.filter(o=>!(o.type_piece||"").toLowerCase().includes("ecran")),l={};for(const o of c){const a=o.type_piece;l[a]||(l[a]=[]),l[a].push(o)}return{qualityCount:t,screenItems:r,batterie:n("batter"),connecteur:n("connect"),camera:n("cam"),otherByType:l,outOfStock:s.filter(o=>o.en_stock===!1).length}}const F=g.reduce((s,r)=>s+r.models.length,0),te=z.batterie,re=z["connecteur de charge"],oe=z["camera arriere"];function q({value:s,icon:r,color:t}){return s==null?null:e.jsxs("span",{className:"hidden sm:inline-flex items-center gap-1 text-[11px] px-2 py-0.5 rounded-lg font-semibold border",style:{background:t.bg,color:t.color,borderColor:t.border},children:[e.jsx(r,{className:"w-3 h-3"}),j(s)]})}function I({value:s,icon:r,color:t}){return s==null?null:e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[9px] px-1.5 py-0.5 rounded-md font-bold",style:{background:t.bg,color:t.color},children:[e.jsx(r,{className:"w-2.5 h-2.5"}),j(s)]})}function D({brand:s,model:r,items:t,idx:n}){const c=`${s}::${r}`,l=he.has(c),o=ke(t);return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ye(c),className:`w-full flex items-center px-5 py-3 text-left transition-colors
            ${n%2===0?"bg-white":"bg-zinc-50/50"} ${l?"!bg-violet-50/60":"hover:bg-violet-50/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[l?e.jsx(A,{className:"w-3.5 h-3.5 text-violet-500 shrink-0"}):e.jsx(R,{className:"w-3.5 h-3.5 text-zinc-400 shrink-0"}),e.jsx("span",{className:"font-semibold text-[13px] text-zinc-900 truncate",children:r}),o.qualityCount>0&&e.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-md whitespace-nowrap font-medium ${l?"bg-violet-100 text-violet-700":"bg-zinc-100 text-zinc-500"}`,children:[o.qualityCount," qualit",o.qualityCount>1?"es":"e"]}),o.outOfStock>0&&e.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded-md bg-red-50 text-red-600 border border-red-200 font-bold whitespace-nowrap",children:[o.outOfStock," rupture",o.outOfStock>1?"s":""]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 shrink-0",children:[e.jsx(q,{value:o.batterie,icon:H,color:te}),e.jsx(q,{value:o.connecteur,icon:X,color:re}),e.jsx(q,{value:o.camera,icon:U,color:oe})]}),e.jsxs("div",{className:"flex sm:hidden items-center gap-1 shrink-0 ml-2",children:[e.jsx(I,{value:o.batterie,icon:H,color:te}),e.jsx(I,{value:o.connecteur,icon:X,color:re}),e.jsx(I,{value:o.camera,icon:U,color:oe})]})]}),l&&e.jsxs("div",{className:"px-5 py-4 bg-violet-50/30 border-t border-violet-100/50",children:[Object.keys(o.otherByType).length>0&&e.jsx("div",{className:"sm:hidden flex flex-wrap gap-2 mb-4",children:Object.entries(o.otherByType).map(([a,f])=>{const x=ie(a),_=ce(a);return e.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg border text-xs ${f[0].en_stock===!1?"opacity-50":""}`,style:{background:x.bg,borderColor:f[0].en_stock===!1?"#fca5a5":x.border},children:[e.jsx(_,{className:"w-3 h-3",style:{color:x.color}}),e.jsx("span",{className:"font-medium",style:{color:x.color},children:a}),e.jsx("span",{className:"font-bold",style:{color:x.color},children:j(f[0].prix_client)}),f[0].en_stock===!1&&e.jsx("span",{className:"text-[8px] text-red-500 font-bold",children:"RUPTURE"})]},a)})}),o.screenItems.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(L,{className:"w-4 h-4 text-violet-500"}),e.jsx("span",{className:"text-[11px] font-semibold text-zinc-600 uppercase tracking-wide",children:"Ecrans disponibles"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2.5",children:o.screenItems.map((a,f)=>{const x=De[a.qualite]||He;return e.jsxs("div",{className:`rounded-xl border-2 p-3 transition-all hover:shadow-md hover:scale-[1.02] ${a.en_stock===!1?"opacity-50":""}`,style:{background:x.bg,borderColor:a.en_stock===!1?"#fca5a5":x.border},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{background:x.color}}),e.jsx("span",{className:"text-[11px] font-bold",style:{color:x.color},children:a.qualite||"Standard"})]}),e.jsx(se,{tarif:a})]}),e.jsx("div",{className:"text-2xl font-extrabold leading-none",style:{color:x.color},children:j(a.prix_client)}),b&&d&&a.prix_fournisseur_ht!=null&&e.jsxs("div",{className:"text-[10px] mt-1.5 opacity-50",style:{color:x.color},children:["Achat : ",Number(a.prix_fournisseur_ht).toFixed(2)," ","â‚¬"," HT"]})]},f)})})]}),Object.keys(o.otherByType).length>0&&e.jsxs("div",{className:"hidden sm:block mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(V,{className:"w-4 h-4 text-indigo-400"}),e.jsx("span",{className:"text-[11px] font-semibold text-zinc-600 uppercase tracking-wide",children:"Autres pieces"})]}),e.jsx("div",{className:"grid grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2.5",children:Object.entries(o.otherByType).map(([a,f])=>{const x=ie(a),_=ce(a);return f.map((N,Ce)=>e.jsxs("div",{className:`rounded-xl border-2 p-3 hover:shadow-md transition-all hover:scale-[1.02] ${N.en_stock===!1?"opacity-50":""}`,style:{background:x.bg,borderColor:N.en_stock===!1?"#fca5a5":x.border},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"w-3.5 h-3.5",style:{color:x.color}}),e.jsx("span",{className:"text-[10px] font-bold uppercase",style:{color:x.color},children:a})]}),e.jsx(se,{tarif:N})]}),e.jsx("div",{className:"text-lg font-extrabold",style:{color:x.color},children:j(N.prix_client)}),b&&d&&N.prix_fournisseur_ht!=null&&e.jsxs("div",{className:"text-[10px] mt-1 opacity-60",style:{color:x.color},children:["Achat : ",Number(N.prix_fournisseur_ht).toFixed(2)," ","â‚¬"," HT"]})]},`${a}-${Ce}`))})})]})]})]},r)}function ne({devices:s,label:r,icon:t,color:n,formulaText:c,sectionKey:l}){if(!s.length&&!d)return null;const o=Q.has(l);return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>ee(l),className:"w-full px-5 py-2.5 border-b flex items-center justify-between cursor-pointer transition-opacity hover:opacity-90",style:{background:n.bg,borderColor:n.border},children:e.jsxs("div",{className:"flex items-center gap-2",children:[o?e.jsx(A,{className:"w-3.5 h-3.5",style:{color:n.text}}):e.jsx(R,{className:"w-3.5 h-3.5",style:{color:n.text}}),e.jsx(t,{className:"w-4 h-4",style:{color:n.text}}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",style:{color:n.text},children:r}),e.jsxs("span",{className:"text-[10px] font-medium opacity-60",style:{color:n.text},children:["(",s.length,")"]})]})}),o&&e.jsxs(e.Fragment,{children:[d&&c&&e.jsx("div",{className:"px-5 py-2 border-b",style:{background:n.formulaBg,borderColor:n.border},children:e.jsxs("span",{className:"text-[13px] font-semibold",style:{color:n.formulaText},children:["ðŸ§®"," ",c]})}),s.length===0?e.jsxs("div",{className:"px-5 py-6 text-center text-xs text-zinc-400",children:["Aucun tarif ",r," pour le moment"]}):e.jsxs("div",{className:"divide-y divide-slate-100",children:[e.jsxs("div",{className:"hidden sm:flex items-center px-5 py-2 bg-zinc-50 text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:[e.jsx("div",{className:"flex-1 pl-2",children:"Modele"}),e.jsx("div",{className:"w-32 text-center",children:"Ecran"}),b&&d&&e.jsx("div",{className:"w-28 text-center",children:"Ecran HT"}),e.jsx("div",{className:"w-32 text-center",children:"Batterie"}),b&&d&&e.jsx("div",{className:"w-28 text-center",children:"Batterie HT"})]}),s.map((a,f)=>e.jsxs("div",{className:`flex flex-col sm:flex-row items-start sm:items-center px-5 py-3 gap-2 sm:gap-0 ${f%2===0?"bg-white":"bg-zinc-50/50"}`,children:[e.jsx("div",{className:"flex-1 pl-2 font-semibold text-[13px] text-zinc-900",children:a.modele}),e.jsx("div",{className:"w-32 text-center",children:a.ecran_prix_vente?e.jsx("span",{className:"font-bold text-sm",style:{color:n.text},children:j(a.ecran_prix_vente)}):e.jsx("span",{className:"text-zinc-300",children:"-"})}),b&&d&&e.jsx("div",{className:"w-28 text-center text-[11px] text-red-400 font-medium",children:a.ecran_prix_ht!=null?`${Number(a.ecran_prix_ht).toFixed(2)} â‚¬ HT`:"-"}),e.jsx("div",{className:"w-32 text-center",children:a.batterie_prix_vente?e.jsx("span",{className:"font-bold text-sm",style:{color:n.text},children:j(a.batterie_prix_vente)}):e.jsx("span",{className:"text-zinc-300",children:"-"})}),b&&d&&e.jsx("div",{className:"w-28 text-center text-[11px] text-red-400 font-medium",children:a.batterie_prix_ht!=null?`${Number(a.batterie_prix_ht).toFixed(2)} â‚¬ HT`:"-"})]},a.id||f))]})]})]})}const Se={bg:"rgba(59,130,246,0.08)",border:"#3B82F633",text:"#3B82F6",formulaBg:"rgba(59,130,246,0.05)",formulaText:"#60A5FA"},_e={bg:"rgba(139,92,246,0.08)",border:"#8B5CF633",text:"#8B5CF6",formulaBg:"rgba(139,92,246,0.05)",formulaText:"#A78BFA"};return e.jsxs("div",{className:"min-h-screen bg-zinc-50 pb-20",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-100 flex items-center justify-center",children:e.jsx(le,{className:"w-5 h-5 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-zinc-900",children:"Grille Tarifaire"}),e.jsx("p",{className:"text-xs text-zinc-500",children:y?`${y.modeles} modeles Â· ${y.marques} marques Â· ${j(y.prix_min)} â†’ ${j(y.prix_max)}`:"Chargement..."})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[d&&e.jsxs("button",{onClick:()=>be(!b),className:"flex items-center gap-1.5 text-[11px] font-semibold px-3 py-2 rounded-lg border transition-all",style:{background:b?"rgba(239,68,68,0.1)":"rgba(100,116,139,0.1)",color:b?"#EF4444":"#64748B",borderColor:b?"#EF444433":"#33415533"},children:[b?e.jsx(Ee,{className:"w-3.5 h-3.5"}):e.jsx(Be,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:b?"Prix HT visibles":"Prix HT masques"})]}),d&&e.jsxs("button",{onClick:je,disabled:B||w,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(Pe,{className:`w-4 h-4 ${B?"animate-pulse":""}`}),e.jsx("span",{className:"hidden sm:inline",children:B?"Verification...":"Verifier stock"})]}),e.jsxs("button",{onClick:()=>{ae("tarifs")},disabled:w||B,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-violet-600 hover:bg-violet-700 text-white text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(Ae,{className:`w-4 h-4 ${w?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:w?"Chargement...":"Actualiser"})]})]})]}),h&&!h.error&&e.jsx("div",{className:"mt-3 p-3 rounded-xl bg-emerald-50 border border-emerald-200 text-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-emerald-800",children:[e.jsx("span",{className:"font-semibold",children:h.models_found})," modeles trouves sur Mobilax"," / ",e.jsx("span",{className:"font-semibold",children:h.models_checked})," verifies"," â€” ",e.jsx("span",{className:"font-semibold",children:h.tarifs_updated})," mises a jour",h.now_rupture>0&&e.jsxs("span",{className:"text-red-600 font-semibold ml-2",children:["(",h.now_rupture," ruptures)"]}),h.now_in_stock>0&&e.jsxs("span",{className:"text-emerald-600 font-semibold ml-2",children:["(",h.now_in_stock," retour en stock)"]})]}),e.jsx("button",{onClick:()=>S(null),className:"text-emerald-400 hover:text-emerald-600 text-xs",children:"Ã—"})]})}),(h==null?void 0:h.error)&&e.jsxs("div",{className:"mt-3 p-3 rounded-xl bg-red-50 border border-red-200 text-sm text-red-700",children:["Erreur lors de la verification du stock.",e.jsx("button",{onClick:()=>S(null),className:"ml-2 text-red-400 hover:text-red-600 text-xs",children:"Ã—"})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher un modele...",value:k,onChange:s=>me(s.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 bg-zinc-50 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/30 focus:border-violet-400 transition-all"})]}),e.jsx("div",{className:"flex gap-1.5 overflow-x-auto scrollbar-none pb-0.5",children:Xe.filter(s=>s==="Toutes"||g.some(r=>r.brand===s)).map(s=>e.jsx("button",{onClick:()=>{ue(s),s==="Toutes"&&(E(new Set),Y(new Set),$(new Set))},className:`px-3 py-2 rounded-lg text-xs font-medium whitespace-nowrap transition-all ${v===s?"bg-zinc-900 text-white shadow-sm":"bg-white border border-slate-200 text-zinc-600 hover:bg-zinc-100"}`,children:s},s))})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 space-y-4",children:u?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"w-10 h-10 border-2 border-violet-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-sm text-zinc-500",children:"Chargement des tarifs..."})]}):g.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(le,{className:"w-12 h-12 text-zinc-300 mx-auto mb-4"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Aucun tarif trouve"})]}):g.map(({brand:s,models:r})=>{const t=Fe[s]||qe,n=pe.has(s),c=s==="Apple";return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("button",{onClick:()=>we(s),className:"w-full px-5 py-3.5 flex items-center justify-between cursor-pointer transition-opacity hover:opacity-90",style:{background:t.bg,color:t.text},children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[n?e.jsx(A,{className:"w-4 h-4 opacity-70"}):e.jsx(R,{className:"w-4 h-4 opacity-70"}),e.jsx(Ie,{slug:t.logo}),e.jsx("span",{className:"font-bold text-sm tracking-wide",children:s})]}),e.jsxs("span",{className:"text-xs opacity-75 font-medium",children:[r.length," modele",r.length>1?"s":""]})]}),n&&c&&e.jsxs("div",{children:[e.jsxs("div",{className:"px-5 py-2.5 border-b flex items-center gap-2",style:{background:"rgba(245,158,11,0.08)",borderColor:"#F59E0B33"},children:[e.jsx(L,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-xs font-bold text-amber-700 uppercase tracking-wider",children:"iPhone"}),e.jsxs("span",{className:"text-[10px] font-medium text-amber-500",children:["(",P.reduce((l,o)=>l+o.models.length,0)," modeles)"]})]}),P.map(({serie:l,models:o})=>{const a=`apple-serie-${l}`,f=Q.has(a);return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>ee(a),className:`w-full flex items-center px-5 py-2.5 text-left transition-colors border-b border-slate-100 ${f?"bg-amber-50/50":"hover:bg-amber-50/30 bg-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[f?e.jsx(A,{className:"w-3.5 h-3.5 text-amber-500 shrink-0"}):e.jsx(R,{className:"w-3.5 h-3.5 text-zinc-400 shrink-0"}),e.jsxs("span",{className:"font-bold text-[13px] text-zinc-800",children:["Serie ",l==="X/XS/XR"?l:`iPhone ${l}`]}),e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded-md bg-amber-100 text-amber-700 font-medium",children:[o.length," modele",o.length>1?"s":""]})]})}),f&&e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center px-5 py-2 bg-zinc-100/80 border-b border-slate-200 text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:[e.jsx("div",{className:"flex-1 pl-7",children:"Modele"}),e.jsx("div",{className:"text-right pr-1",children:"Pieces disponibles"})]}),o.map(({model:x,items:_},N)=>e.jsx(D,{brand:"Apple",model:x,items:_,idx:N},x))]})]},l)}),Z.length>0&&Z.map(({model:l,items:o},a)=>e.jsx(D,{brand:"Apple",model:l,items:o,idx:a},l)),e.jsx(ne,{devices:Ne,label:"iPad",icon:ze,color:Se,formulaText:"Formule : (Prix piÃ¨ce HT Ã— 1.2) + 110â‚¬ de main d'Å“uvre",sectionKey:"apple-ipad"}),e.jsx(ne,{devices:ve,label:"MacBook",icon:Le,color:_e,formulaText:"Formule : (Prix piÃ¨ce HT Ã— 1.2) + 120â‚¬ de main d'Å“uvre",sectionKey:"apple-macbook"})]}),n&&!c&&e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center px-5 py-2 bg-zinc-100/80 border-b border-slate-200 text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:[e.jsx("div",{className:"flex-1 pl-7",children:"Modele"}),e.jsx("div",{className:"text-right pr-1",children:"Pieces disponibles"})]}),r.map(({model:l,items:o},a)=>e.jsx(D,{brand:s,model:l,items:o,idx:a},l))]})]},s)})}),!u&&F>0&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"text-center text-xs text-zinc-400 space-y-1",children:e.jsxs("p",{children:[F," mod","Ã¨","le",F>1?"s":""," ","Â·"," ",g.length," marque",g.length>1?"s":""," ","Â·"," Source : Mobilax"]})})})]})}export{Je as default};
