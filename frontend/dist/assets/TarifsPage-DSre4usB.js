import{u as Pe,a as _,j as e}from"./index-D9szXIDE.js";import{r as i}from"./vendor-react-DMwujlca.js";import{T as ie,at as Ae,m as Be,au as Re,h as ze,a as Le,C as B,J as R,b as L,av as Me,aw as $e,ax as X,ay as U,az as G,P as K,aA as Fe,r as qe}from"./vendor-icons-DnXwj2oL.js";const De={Apple:{bg:"#18181b",text:"#fff",logo:"apple"},Samsung:{bg:"#2563eb",text:"#fff",logo:"samsung"},Xiaomi:{bg:"#ea580c",text:"#fff",logo:"xiaomi"},Huawei:{bg:"#dc2626",text:"#fff",logo:"huawei"},Honor:{bg:"#6d28d9",text:"#fff",logo:"honor"},Google:{bg:"#16a34a",text:"#fff",logo:"google"},Oppo:{bg:"#059669",text:"#fff",logo:"oppo"},OnePlus:{bg:"#dc2626",text:"#fff",logo:"oneplus"},Motorola:{bg:"#0891b2",text:"#fff",logo:"motorola"},Nothing:{bg:"#18181b",text:"#fff",logo:"nothing"},Realme:{bg:"#d97706",text:"#fff",logo:"realme"},Vivo:{bg:"#1d4ed8",text:"#fff",logo:"vivo"}},Ie={bg:"#6d28d9",text:"#fff",logo:null},He=i.memo(function({slug:d,size:f=18}){const[p,v]=i.useState(!1);return!d||p?e.jsx(L,{className:"w-[18px] h-[18px] opacity-70"}):e.jsx("img",{src:`https://cdn.simpleicons.org/${d}/ffffff`,alt:"",width:f,height:f,className:"shrink-0",style:{filter:"brightness(1)",minWidth:f},loading:"lazy",onError:()=>v(!0)})}),Xe={Original:{color:"#047857",bg:"#ecfdf5",border:"#a7f3d0"},"Soft OLED":{color:"#6d28d9",bg:"#f5f3ff",border:"#c4b5fd"},OLED:{color:"#1d4ed8",bg:"#eff6ff",border:"#93c5fd"},Incell:{color:"#b45309",bg:"#fffbeb",border:"#fcd34d"},LCD:{color:"#52525b",bg:"#f4f4f5",border:"#d4d4d8"},Reconditionnee:{color:"#0e7490",bg:"#ecfeff",border:"#67e8f9"},Compatible:{color:"#be123c",bg:"#fff1f2",border:"#fda4af"}},Ue={color:"#52525b",bg:"#f4f4f5",border:"#d4d4d8"},V=["Apple","Samsung","Xiaomi","Huawei","Honor","Google","Oppo","OnePlus","Motorola","Nothing","Realme","Vivo"],Ge=["Toutes",...V],Ve={ecran:L,batterie:X,connecteur:U,camera:G,vitre:K,"haut-parleur":qe,ecouteur:Fe},z={batterie:{color:"#047857",bg:"#ecfdf5",border:"#a7f3d0"},"connecteur de charge":{color:"#1d4ed8",bg:"#eff6ff",border:"#93c5fd"},"camera arriere":{color:"#b45309",bg:"#fffbeb",border:"#fcd34d"},"vitre arriere":{color:"#7c3aed",bg:"#f5f3ff",border:"#c4b5fd"},"haut-parleur":{color:"#0f766e",bg:"#f0fdfa",border:"#99f6e4"},"ecouteur interne":{color:"#be185d",bg:"#fdf2f8",border:"#f9a8d4"},"vitre camera arriere":{color:"#4338ca",bg:"#eef2ff",border:"#a5b4fc"}},Ke={color:"#52525b",bg:"#f4f4f5",border:"#d4d4d8"};function de(u){const d=(u||"").toLowerCase();for(const[f,p]of Object.entries(Ve))if(d.includes(f))return p;return K}function xe(u){const d=(u||"").toLowerCase();for(const[f,p]of Object.entries(z))if(d.includes(f))return p;return Ke}function j(u){return u==null?null:`${u} â‚¬`}const me=["17","16","15","14","13","12","11","SE","X/XS/XR","8","7"];function Ye(u){const d=u.match(/iPhone\s*(\d+|SE|X[SR]?)/i);if(!d)return"Autre";const f=d[1].toUpperCase();return["X","XS","XR"].includes(f)?"X/XS/XR":f}function Qe(u,d){const f=p=>/Pro Max/i.test(p)?0:/Pro/i.test(p)?1:/Plus/i.test(p)?2:/Mini/i.test(p)?3:4;return f(u)-f(d)}function et(){const{user:u}=Pe(),d=(u==null?void 0:u.role)==="admin",[f,p]=i.useState([]),[v,fe]=i.useState(null),[C,ue]=i.useState([]),[Y,Q]=i.useState(!0),[y,pe]=i.useState(""),[M,he]=i.useState(""),T=i.useRef(null),[w,be]=i.useState("Toutes"),[ge,O]=i.useState(new Set),[je,J]=i.useState(new Set),[W,$]=i.useState(new Set),[E,Z]=i.useState(!1),[P,ee]=i.useState(!1),[h,k]=i.useState(null),[b,Ne]=i.useState(!1);i.useEffect(()=>{F()},[]),i.useEffect(()=>(T.current&&clearTimeout(T.current),T.current=setTimeout(()=>he(y),300),()=>clearTimeout(T.current)),[y]);async function F(){Q(!0);try{const[t,r,s]=await Promise.all([_.getTarifs(),_.getTarifsStats(),_.getAppleDevices().catch(()=>[])]);p(t),fe(r),ue(s||[])}catch(t){console.error("Erreur chargement tarifs:",t)}finally{Q(!1)}}async function ve(t){try{const r=await _.toggleTarifStock(t);p(s=>s.map(n=>n.id===t?{...n,en_stock:r.en_stock}:n))}catch(r){console.error("Erreur toggle stock:",r)}}async function we(){ee(!0),k(null);try{const t=await _.checkTarifStock();k(t),await F()}catch(t){console.error("Erreur check stock:",t),k({error:!0})}finally{ee(!1)}}const te=i.useMemo(()=>{let t=f;if(w!=="Toutes"&&(t=t.filter(r=>r.marque===w)),M.trim()){const r=M.toLowerCase();t=t.filter(s=>(s.marque||"").toLowerCase().includes(r)||(s.modele||"").toLowerCase().includes(r)||(s.type_piece||"").toLowerCase().includes(r)||(s.qualite||"").toLowerCase().includes(r))}return t},[f,w,M]),g=i.useMemo(()=>{const t={};for(const s of te)t[s.marque]||(t[s.marque]={}),t[s.marque][s.modele]||(t[s.marque][s.modele]=[]),t[s.marque][s.modele].push(s);return Object.keys(t).sort((s,n)=>{const c=V.indexOf(s),l=V.indexOf(n);return c>=0&&l>=0?c-l:c>=0?-1:l>=0?1:s.localeCompare(n)}).map(s=>({brand:s,models:Object.entries(t[s]).sort(([n],[c])=>n.localeCompare(c)).map(([n,c])=>({model:n,items:c}))}))},[te]),A=i.useMemo(()=>{const t=g.find(s=>s.brand==="Apple");if(!t)return[];const r={};for(const{model:s,items:n}of t.models){if(!s.toLowerCase().includes("iphone"))continue;const c=Ye(s);r[c]||(r[c]=[]),r[c].push({model:s,items:n})}for(const s of Object.keys(r))r[s].sort((n,c)=>Qe(n.model,c.model));return Object.entries(r).sort(([s],[n])=>{const c=me.indexOf(s),l=me.indexOf(n);return c>=0&&l>=0?c-l:c>=0?-1:l>=0?1:0}).map(([s,n])=>({serie:s,models:n}))},[g]),se=i.useMemo(()=>{const t=g.find(r=>r.brand==="Apple");return t?t.models.filter(({model:r})=>!r.toLowerCase().includes("iphone")):[]},[g]),ye=i.useMemo(()=>C.filter(t=>t.categorie==="ipad"),[C]),ke=i.useMemo(()=>C.filter(t=>t.categorie==="macbook"),[C]);i.useEffect(()=>{y.trim()&&O(new Set(g.map(t=>t.brand)))},[y,g]),i.useEffect(()=>{w!=="Toutes"&&O(new Set([w]))},[w]);function Se(t){O(r=>{const s=new Set(r);return s.has(t)?s.delete(t):(s.add(t),t==="Apple"&&A.length>0&&$(n=>{const c=new Set(n);return c.add(`apple-serie-${A[0].serie}`),c})),s})}function _e(t){J(r=>{const s=new Set(r);return s.has(t)?s.delete(t):s.add(t),s})}function re(t){$(r=>{const s=new Set(r);return s.has(t)?s.delete(t):s.add(t),s})}function oe({tarif:t}){const r=t.en_stock!==!1;return e.jsx("button",{onClick:s=>{s.stopPropagation(),ve(t.id)},className:`inline-flex items-center gap-1 text-[9px] font-bold px-1.5 py-0.5 rounded-md transition-all cursor-pointer ${r?"bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border border-emerald-200":"bg-red-50 text-red-600 hover:bg-red-100 border border-red-200"}`,title:r?"En stock":"Rupture",children:r?"En stock":"Rupture"})}function Ce(t){const r=t.filter(o=>(o.type_piece||"").toLowerCase().includes("ecran")),s=new Set(r.map(o=>o.qualite).filter(Boolean)).size,n=o=>{const a=t.filter(m=>(m.type_piece||"").toLowerCase().includes(o));return a.length?Math.min(...a.map(m=>m.prix_client)):null},c=t.filter(o=>!(o.type_piece||"").toLowerCase().includes("ecran")),l={};for(const o of c){const a=o.type_piece;l[a]||(l[a]=[]),l[a].push(o)}return{qualityCount:s,screenItems:r,batterie:n("batter"),connecteur:n("connect"),camera:n("cam"),otherByType:l,outOfStock:t.filter(o=>o.en_stock===!1).length}}const q=g.reduce((t,r)=>t+r.models.length,0),ne=z.batterie,ae=z["connecteur de charge"],le=z["camera arriere"];function D({value:t,icon:r,color:s}){return t==null?null:e.jsxs("span",{className:"hidden sm:inline-flex items-center gap-1 text-[11px] px-2 py-0.5 rounded-lg font-semibold border",style:{background:s.bg,color:s.color,borderColor:s.border},children:[e.jsx(r,{className:"w-3 h-3"}),j(t)]})}function I({value:t,icon:r,color:s}){return t==null?null:e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[9px] px-1.5 py-0.5 rounded-md font-bold",style:{background:s.bg,color:s.color},children:[e.jsx(r,{className:"w-2.5 h-2.5"}),j(t)]})}function H({brand:t,model:r,items:s,idx:n}){const c=`${t}::${r}`,l=je.has(c),o=Ce(s);return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>_e(c),className:`w-full flex items-center px-5 py-3 text-left transition-colors
            ${n%2===0?"bg-white":"bg-zinc-50/50"} ${l?"!bg-violet-50/60":"hover:bg-violet-50/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[l?e.jsx(B,{className:"w-3.5 h-3.5 text-violet-500 shrink-0"}):e.jsx(R,{className:"w-3.5 h-3.5 text-zinc-400 shrink-0"}),e.jsx("span",{className:"font-semibold text-[13px] text-zinc-900 truncate",children:r}),o.qualityCount>0&&e.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-md whitespace-nowrap font-medium ${l?"bg-violet-100 text-violet-700":"bg-zinc-100 text-zinc-500"}`,children:[o.qualityCount," qualit",o.qualityCount>1?"es":"e"]}),o.outOfStock>0&&e.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded-md bg-red-50 text-red-600 border border-red-200 font-bold whitespace-nowrap",children:[o.outOfStock," rupture",o.outOfStock>1?"s":""]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 shrink-0",children:[e.jsx(D,{value:o.batterie,icon:X,color:ne}),e.jsx(D,{value:o.connecteur,icon:U,color:ae}),e.jsx(D,{value:o.camera,icon:G,color:le})]}),e.jsxs("div",{className:"flex sm:hidden items-center gap-1 shrink-0 ml-2",children:[e.jsx(I,{value:o.batterie,icon:X,color:ne}),e.jsx(I,{value:o.connecteur,icon:U,color:ae}),e.jsx(I,{value:o.camera,icon:G,color:le})]})]}),l&&e.jsxs("div",{className:"px-5 py-4 bg-violet-50/30 border-t border-violet-100/50",children:[Object.keys(o.otherByType).length>0&&e.jsx("div",{className:"sm:hidden flex flex-wrap gap-2 mb-4",children:Object.entries(o.otherByType).map(([a,m])=>{const x=xe(a),S=de(a);return e.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg border text-xs ${m[0].en_stock===!1?"opacity-50":""}`,style:{background:x.bg,borderColor:m[0].en_stock===!1?"#fca5a5":x.border},children:[e.jsx(S,{className:"w-3 h-3",style:{color:x.color}}),e.jsx("span",{className:"font-medium",style:{color:x.color},children:a}),e.jsx("span",{className:"font-bold",style:{color:x.color},children:j(m[0].prix_client)}),m[0].en_stock===!1&&e.jsx("span",{className:"text-[8px] text-red-500 font-bold",children:"RUPTURE"})]},a)})}),o.screenItems.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(L,{className:"w-4 h-4 text-violet-500"}),e.jsx("span",{className:"text-[11px] font-semibold text-zinc-600 uppercase tracking-wide",children:"Ecrans disponibles"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2.5",children:o.screenItems.map((a,m)=>{const x=Xe[a.qualite]||Ue;return e.jsxs("div",{className:`rounded-xl border-2 p-3 transition-all hover:shadow-md hover:scale-[1.02] ${a.en_stock===!1?"opacity-50":""}`,style:{background:x.bg,borderColor:a.en_stock===!1?"#fca5a5":x.border},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{background:x.color}}),e.jsx("span",{className:"text-[11px] font-bold",style:{color:x.color},children:a.qualite||"Standard"})]}),e.jsx(oe,{tarif:a})]}),e.jsx("div",{className:"text-2xl font-extrabold leading-none",style:{color:x.color},children:j(a.prix_client)}),b&&d&&a.prix_fournisseur_ht!=null&&e.jsxs("div",{className:"text-[10px] mt-1.5 opacity-50",style:{color:x.color},children:["Achat : ",Number(a.prix_fournisseur_ht).toFixed(2)," ","â‚¬"," HT"]})]},m)})})]}),Object.keys(o.otherByType).length>0&&e.jsxs("div",{className:"hidden sm:block mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(K,{className:"w-4 h-4 text-indigo-400"}),e.jsx("span",{className:"text-[11px] font-semibold text-zinc-600 uppercase tracking-wide",children:"Autres pieces"})]}),e.jsx("div",{className:"grid grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2.5",children:Object.entries(o.otherByType).map(([a,m])=>{const x=xe(a),S=de(a);return m.map((N,Ee)=>e.jsxs("div",{className:`rounded-xl border-2 p-3 hover:shadow-md transition-all hover:scale-[1.02] ${N.en_stock===!1?"opacity-50":""}`,style:{background:x.bg,borderColor:N.en_stock===!1?"#fca5a5":x.border},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(S,{className:"w-3.5 h-3.5",style:{color:x.color}}),e.jsx("span",{className:"text-[10px] font-bold uppercase",style:{color:x.color},children:a})]}),e.jsx(oe,{tarif:N})]}),e.jsx("div",{className:"text-lg font-extrabold",style:{color:x.color},children:j(N.prix_client)}),b&&d&&N.prix_fournisseur_ht!=null&&e.jsxs("div",{className:"text-[10px] mt-1 opacity-60",style:{color:x.color},children:["Achat : ",Number(N.prix_fournisseur_ht).toFixed(2)," ","â‚¬"," HT"]})]},`${a}-${Ee}`))})})]})]})]},r)}function ce({devices:t,label:r,icon:s,color:n,formulaText:c,sectionKey:l}){if(!t.length&&!d)return null;const o=W.has(l);return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>re(l),className:"w-full px-5 py-2.5 border-b flex items-center justify-between cursor-pointer transition-opacity hover:opacity-90",style:{background:n.bg,borderColor:n.border},children:e.jsxs("div",{className:"flex items-center gap-2",children:[o?e.jsx(B,{className:"w-3.5 h-3.5",style:{color:n.text}}):e.jsx(R,{className:"w-3.5 h-3.5",style:{color:n.text}}),e.jsx(s,{className:"w-4 h-4",style:{color:n.text}}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",style:{color:n.text},children:r}),e.jsxs("span",{className:"text-[10px] font-medium opacity-60",style:{color:n.text},children:["(",t.length,")"]})]})}),o&&e.jsxs(e.Fragment,{children:[d&&c&&e.jsx("div",{className:"px-5 py-2 border-b",style:{background:n.formulaBg,borderColor:n.border},children:e.jsxs("span",{className:"text-[13px] font-semibold",style:{color:n.formulaText},children:["ðŸ§®"," ",c]})}),t.length===0?e.jsxs("div",{className:"px-5 py-6 text-center text-xs text-zinc-400",children:["Aucun tarif ",r," pour le moment"]}):e.jsxs("div",{className:"divide-y divide-slate-100",children:[e.jsxs("div",{className:"hidden sm:flex items-center px-5 py-2 bg-zinc-50 text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:[e.jsx("div",{className:"flex-1 pl-2",children:"Modele"}),e.jsx("div",{className:"w-32 text-center",children:"Ecran"}),b&&d&&e.jsx("div",{className:"w-28 text-center",children:"Ecran HT"}),e.jsx("div",{className:"w-32 text-center",children:"Batterie"}),b&&d&&e.jsx("div",{className:"w-28 text-center",children:"Batterie HT"})]}),t.map((a,m)=>e.jsxs("div",{className:`flex flex-col sm:flex-row items-start sm:items-center px-5 py-3 gap-2 sm:gap-0 ${m%2===0?"bg-white":"bg-zinc-50/50"}`,children:[e.jsx("div",{className:"flex-1 pl-2 font-semibold text-[13px] text-zinc-900",children:a.modele}),e.jsx("div",{className:"w-32 text-center",children:a.ecran_prix_vente?e.jsx("span",{className:"font-bold text-sm",style:{color:n.text},children:j(a.ecran_prix_vente)}):e.jsx("span",{className:"text-zinc-300",children:"-"})}),b&&d&&e.jsx("div",{className:"w-28 text-center text-[11px] text-red-400 font-medium",children:a.ecran_prix_ht!=null?`${Number(a.ecran_prix_ht).toFixed(2)} â‚¬ HT`:"-"}),e.jsx("div",{className:"w-32 text-center",children:a.batterie_prix_vente?e.jsx("span",{className:"font-bold text-sm",style:{color:n.text},children:j(a.batterie_prix_vente)}):e.jsx("span",{className:"text-zinc-300",children:"-"})}),b&&d&&e.jsx("div",{className:"w-28 text-center text-[11px] text-red-400 font-medium",children:a.batterie_prix_ht!=null?`${Number(a.batterie_prix_ht).toFixed(2)} â‚¬ HT`:"-"})]},a.id||m))]})]})]})}const Te={bg:"rgba(59,130,246,0.08)",border:"#3B82F633",text:"#3B82F6",formulaBg:"rgba(59,130,246,0.05)",formulaText:"#60A5FA"},Oe={bg:"rgba(139,92,246,0.08)",border:"#8B5CF633",text:"#8B5CF6",formulaBg:"rgba(139,92,246,0.05)",formulaText:"#A78BFA"};return e.jsxs("div",{className:"min-h-screen bg-zinc-50 pb-20",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-100 flex items-center justify-center",children:e.jsx(ie,{className:"w-5 h-5 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-zinc-900",children:"Grille Tarifaire"}),e.jsx("p",{className:"text-xs text-zinc-500",children:v?`${v.modeles} modeles Â· ${v.marques} marques Â· ${j(v.prix_min)} â†’ ${j(v.prix_max)}`:"Chargement..."})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[d&&e.jsxs("button",{onClick:()=>Ne(!b),className:"flex items-center gap-1.5 text-[11px] font-semibold px-3 py-2 rounded-lg border transition-all",style:{background:b?"rgba(239,68,68,0.1)":"rgba(100,116,139,0.1)",color:b?"#EF4444":"#64748B",borderColor:b?"#EF444433":"#33415533"},children:[b?e.jsx(Ae,{className:"w-3.5 h-3.5"}):e.jsx(Be,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:b?"Prix HT visibles":"Prix HT masques"})]}),d&&e.jsxs("button",{onClick:we,disabled:P||E,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(Re,{className:`w-4 h-4 ${P?"animate-pulse":""}`}),e.jsx("span",{className:"hidden sm:inline",children:P?"Verification...":"Verifier stock"})]}),e.jsxs("button",{onClick:async()=>{Z(!0),await F(),Z(!1)},disabled:E||P,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-violet-600 hover:bg-violet-700 text-white text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(ze,{className:`w-4 h-4 ${E?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:E?"Chargement...":"Actualiser"})]})]})]}),h&&!h.error&&e.jsx("div",{className:"mt-3 p-3 rounded-xl bg-emerald-50 border border-emerald-200 text-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-emerald-800",children:[e.jsx("span",{className:"font-semibold",children:h.models_found})," modeles trouves sur Mobilax"," / ",e.jsx("span",{className:"font-semibold",children:h.models_checked})," verifies"," â€” ",e.jsx("span",{className:"font-semibold",children:h.tarifs_updated})," mises a jour",h.now_rupture>0&&e.jsxs("span",{className:"text-red-600 font-semibold ml-2",children:["(",h.now_rupture," ruptures)"]}),h.now_in_stock>0&&e.jsxs("span",{className:"text-emerald-600 font-semibold ml-2",children:["(",h.now_in_stock," retour en stock)"]})]}),e.jsx("button",{onClick:()=>k(null),className:"text-emerald-400 hover:text-emerald-600 text-xs",children:"Ã—"})]})}),(h==null?void 0:h.error)&&e.jsxs("div",{className:"mt-3 p-3 rounded-xl bg-red-50 border border-red-200 text-sm text-red-700",children:["Erreur lors de la verification du stock.",e.jsx("button",{onClick:()=>k(null),className:"ml-2 text-red-400 hover:text-red-600 text-xs",children:"Ã—"})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher un modele...",value:y,onChange:t=>pe(t.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 bg-zinc-50 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/30 focus:border-violet-400 transition-all"})]}),e.jsx("div",{className:"flex gap-1.5 overflow-x-auto scrollbar-none pb-0.5",children:Ge.filter(t=>t==="Toutes"||g.some(r=>r.brand===t)).map(t=>e.jsx("button",{onClick:()=>{be(t),t==="Toutes"&&(O(new Set),J(new Set),$(new Set))},className:`px-3 py-2 rounded-lg text-xs font-medium whitespace-nowrap transition-all ${w===t?"bg-zinc-900 text-white shadow-sm":"bg-white border border-slate-200 text-zinc-600 hover:bg-zinc-100"}`,children:t},t))})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 space-y-4",children:Y?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"w-10 h-10 border-2 border-violet-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-sm text-zinc-500",children:"Chargement des tarifs..."})]}):g.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(ie,{className:"w-12 h-12 text-zinc-300 mx-auto mb-4"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Aucun tarif trouve"})]}):g.map(({brand:t,models:r})=>{const s=De[t]||Ie,n=ge.has(t),c=t==="Apple";return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("button",{onClick:()=>Se(t),className:"w-full px-5 py-3.5 flex items-center justify-between cursor-pointer transition-opacity hover:opacity-90",style:{background:s.bg,color:s.text},children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[n?e.jsx(B,{className:"w-4 h-4 opacity-70"}):e.jsx(R,{className:"w-4 h-4 opacity-70"}),e.jsx(He,{slug:s.logo}),e.jsx("span",{className:"font-bold text-sm tracking-wide",children:t})]}),e.jsxs("span",{className:"text-xs opacity-75 font-medium",children:[r.length," modele",r.length>1?"s":""]})]}),n&&c&&e.jsxs("div",{children:[e.jsxs("div",{className:"px-5 py-2.5 border-b flex items-center gap-2",style:{background:"rgba(245,158,11,0.08)",borderColor:"#F59E0B33"},children:[e.jsx(L,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-xs font-bold text-amber-700 uppercase tracking-wider",children:"iPhone"}),e.jsxs("span",{className:"text-[10px] font-medium text-amber-500",children:["(",A.reduce((l,o)=>l+o.models.length,0)," modeles)"]})]}),A.map(({serie:l,models:o})=>{const a=`apple-serie-${l}`,m=W.has(a);return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>re(a),className:`w-full flex items-center px-5 py-2.5 text-left transition-colors border-b border-slate-100 ${m?"bg-amber-50/50":"hover:bg-amber-50/30 bg-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[m?e.jsx(B,{className:"w-3.5 h-3.5 text-amber-500 shrink-0"}):e.jsx(R,{className:"w-3.5 h-3.5 text-zinc-400 shrink-0"}),e.jsxs("span",{className:"font-bold text-[13px] text-zinc-800",children:["Serie ",l==="X/XS/XR"?l:`iPhone ${l}`]}),e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded-md bg-amber-100 text-amber-700 font-medium",children:[o.length," modele",o.length>1?"s":""]})]})}),m&&e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center px-5 py-2 bg-zinc-100/80 border-b border-slate-200 text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:[e.jsx("div",{className:"flex-1 pl-7",children:"Modele"}),e.jsx("div",{className:"text-right pr-1",children:"Pieces disponibles"})]}),o.map(({model:x,items:S},N)=>e.jsx(H,{brand:"Apple",model:x,items:S,idx:N},x))]})]},l)}),se.length>0&&se.map(({model:l,items:o},a)=>e.jsx(H,{brand:"Apple",model:l,items:o,idx:a},l)),e.jsx(ce,{devices:ye,label:"iPad",icon:Me,color:Te,formulaText:"Formule : (Prix piÃ¨ce HT Ã— 1.2) + 110â‚¬ de main d'Å“uvre",sectionKey:"apple-ipad"}),e.jsx(ce,{devices:ke,label:"MacBook",icon:$e,color:Oe,formulaText:"Formule : (Prix piÃ¨ce HT Ã— 1.2) + 120â‚¬ de main d'Å“uvre",sectionKey:"apple-macbook"})]}),n&&!c&&e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center px-5 py-2 bg-zinc-100/80 border-b border-slate-200 text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:[e.jsx("div",{className:"flex-1 pl-7",children:"Modele"}),e.jsx("div",{className:"text-right pr-1",children:"Pieces disponibles"})]}),r.map(({model:l,items:o},a)=>e.jsx(H,{brand:t,model:l,items:o,idx:a},l))]})]},t)})}),!Y&&q>0&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"text-center text-xs text-zinc-400 space-y-1",children:e.jsxs("p",{children:[q," mod","Ã¨","le",q>1?"s":""," ","Â·"," ",g.length," marque",g.length>1?"s":""," ","Â·"," Source : Mobilax"]})})})]})}export{et as default};
