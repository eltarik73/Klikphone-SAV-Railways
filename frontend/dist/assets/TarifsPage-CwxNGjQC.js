import{u as Oe,a as _,j as e}from"./index-5YFw6LH3.js";import{r as i}from"./vendor-react-DMwujlca.js";import{T as ne,at as Te,m as Ee,au as Pe,h as Ae,a as Be,C as $,J as q,b as A,av as Re,aw as ze,ax as F,ay as D,az as I,P as X,aA as Le,r as Me}from"./vendor-icons-DnXwj2oL.js";const $e={Apple:{bg:"#18181b",text:"#fff",logo:"apple"},Samsung:{bg:"#2563eb",text:"#fff",logo:"samsung"},Xiaomi:{bg:"#ea580c",text:"#fff",logo:"xiaomi"},Huawei:{bg:"#dc2626",text:"#fff",logo:"huawei"},Honor:{bg:"#6d28d9",text:"#fff",logo:"honor"},Google:{bg:"#16a34a",text:"#fff",logo:"google"},Oppo:{bg:"#059669",text:"#fff",logo:"oppo"},OnePlus:{bg:"#dc2626",text:"#fff",logo:"oneplus"},Motorola:{bg:"#0891b2",text:"#fff",logo:"motorola"},Nothing:{bg:"#18181b",text:"#fff",logo:"nothing"},Realme:{bg:"#d97706",text:"#fff",logo:"realme"},Vivo:{bg:"#1d4ed8",text:"#fff",logo:"vivo"}},qe={bg:"#6d28d9",text:"#fff",logo:null};function Fe({slug:m,size:d=18}){const[u,p]=i.useState(!1);return!m||u?e.jsx(A,{className:"w-[18px] h-[18px] opacity-70"}):e.jsx("img",{src:`https://cdn.simpleicons.org/${m}/ffffff`,alt:"",width:d,height:d,className:"shrink-0",style:{filter:"brightness(1)",minWidth:d},onError:()=>p(!0)})}const De={Original:{color:"#047857",bg:"#ecfdf5",border:"#a7f3d0"},"Soft OLED":{color:"#6d28d9",bg:"#f5f3ff",border:"#c4b5fd"},OLED:{color:"#1d4ed8",bg:"#eff6ff",border:"#93c5fd"},Incell:{color:"#b45309",bg:"#fffbeb",border:"#fcd34d"},LCD:{color:"#52525b",bg:"#f4f4f5",border:"#d4d4d8"},Reconditionnee:{color:"#0e7490",bg:"#ecfeff",border:"#67e8f9"},Compatible:{color:"#be123c",bg:"#fff1f2",border:"#fda4af"}},Ie={color:"#52525b",bg:"#f4f4f5",border:"#d4d4d8"},H=["Apple","Samsung","Xiaomi","Huawei","Honor","Google","Oppo","OnePlus","Motorola","Nothing","Realme","Vivo"],He=["Toutes",...H],Xe={ecran:A,batterie:F,connecteur:D,camera:I,vitre:X,"haut-parleur":Me,ecouteur:Le},P={batterie:{color:"#047857",bg:"#ecfdf5",border:"#a7f3d0"},"connecteur de charge":{color:"#1d4ed8",bg:"#eff6ff",border:"#93c5fd"},"camera arriere":{color:"#b45309",bg:"#fffbeb",border:"#fcd34d"},"vitre arriere":{color:"#7c3aed",bg:"#f5f3ff",border:"#c4b5fd"},"haut-parleur":{color:"#0f766e",bg:"#f0fdfa",border:"#99f6e4"},"ecouteur interne":{color:"#be185d",bg:"#fdf2f8",border:"#f9a8d4"},"vitre camera arriere":{color:"#4338ca",bg:"#eef2ff",border:"#a5b4fc"}},Ue={color:"#52525b",bg:"#f4f4f5",border:"#d4d4d8"};function ae(m){const d=(m||"").toLowerCase();for(const[u,p]of Object.entries(Xe))if(d.includes(u))return p;return X}function le(m){const d=(m||"").toLowerCase();for(const[u,p]of Object.entries(P))if(d.includes(u))return p;return Ue}function j(m){return m==null?null:`${m}Â â‚¬`}const ce=["17","16","15","14","13","12","11","SE","X/XS/XR","8","7"];function Ge(m){const d=m.match(/iPhone\s*(\d+|SE|X[SR]?)/i);if(!d)return"Autre";const u=d[1].toUpperCase();return["X","XS","XR"].includes(u)?"X/XS/XR":u}function Ve(m,d){const u=p=>/Pro Max/i.test(p)?0:/Pro/i.test(p)?1:/Plus/i.test(p)?2:/Mini/i.test(p)?3:4;return u(m)-u(d)}function Je(){const{user:m}=Oe(),d=(m==null?void 0:m.target)==="accueil",[u,p]=i.useState([]),[y,ie]=i.useState(null),[C,de]=i.useState([]),[U,G]=i.useState(!0),[w,xe]=i.useState(""),[v,me]=i.useState("Toutes"),[fe,O]=i.useState(new Set),[ue,V]=i.useState(new Set),[pe,Y]=i.useState(new Set),[T,K]=i.useState(!1),[E,Q]=i.useState(!1),[h,k]=i.useState(null),[b,he]=i.useState(!1);i.useEffect(()=>{B()},[]);async function B(){G(!0);try{const[t,r,s]=await Promise.all([_.getTarifs(),_.getTarifsStats(),_.getAppleDevices().catch(()=>[])]);p(t),ie(r),de(s||[])}catch(t){console.error("Erreur chargement tarifs:",t)}finally{G(!1)}}async function be(t){try{const r=await _.toggleTarifStock(t);p(s=>s.map(a=>a.id===t?{...a,en_stock:r.en_stock}:a))}catch(r){console.error("Erreur toggle stock:",r)}}async function ge(){Q(!0),k(null);try{const t=await _.checkTarifStock();k(t),await B()}catch(t){console.error("Erreur check stock:",t),k({error:!0})}finally{Q(!1)}}const J=i.useMemo(()=>{let t=u;if(v!=="Toutes"&&(t=t.filter(r=>r.marque===v)),w.trim()){const r=w.toLowerCase();t=t.filter(s=>(s.marque||"").toLowerCase().includes(r)||(s.modele||"").toLowerCase().includes(r)||(s.type_piece||"").toLowerCase().includes(r)||(s.qualite||"").toLowerCase().includes(r))}return t},[u,v,w]),g=i.useMemo(()=>{const t={};for(const s of J)t[s.marque]||(t[s.marque]={}),t[s.marque][s.modele]||(t[s.marque][s.modele]=[]),t[s.marque][s.modele].push(s);return Object.keys(t).sort((s,a)=>{const c=H.indexOf(s),n=H.indexOf(a);return c>=0&&n>=0?c-n:c>=0?-1:n>=0?1:s.localeCompare(a)}).map(s=>({brand:s,models:Object.entries(t[s]).sort(([a],[c])=>a.localeCompare(c)).map(([a,c])=>({model:a,items:c}))}))},[J]),W=i.useMemo(()=>{const t=g.find(s=>s.brand==="Apple");if(!t)return[];const r={};for(const{model:s,items:a}of t.models){if(!s.toLowerCase().includes("iphone"))continue;const c=Ge(s);r[c]||(r[c]=[]),r[c].push({model:s,items:a})}for(const s of Object.keys(r))r[s].sort((a,c)=>Ve(a.model,c.model));return Object.entries(r).sort(([s],[a])=>{const c=ce.indexOf(s),n=ce.indexOf(a);return c>=0&&n>=0?c-n:c>=0?-1:n>=0?1:0}).map(([s,a])=>({serie:s,models:a}))},[g]),Z=i.useMemo(()=>{const t=g.find(r=>r.brand==="Apple");return t?t.models.filter(({model:r})=>!r.toLowerCase().includes("iphone")):[]},[g]),je=i.useMemo(()=>C.filter(t=>t.categorie==="ipad"),[C]),Ne=i.useMemo(()=>C.filter(t=>t.categorie==="macbook"),[C]);i.useEffect(()=>{w.trim()&&O(new Set(g.map(t=>t.brand)))},[w,g]),i.useEffect(()=>{v!=="Toutes"&&O(new Set([v]))},[v]);function ve(t){O(r=>{const s=new Set(r);return s.has(t)?s.delete(t):s.add(t),s})}function we(t){V(r=>{const s=new Set(r);return s.has(t)?s.delete(t):s.add(t),s})}function ye(t){Y(r=>{const s=new Set(r);return s.has(t)?s.delete(t):s.add(t),s})}function ee({tarif:t}){const r=t.en_stock!==!1;return e.jsx("button",{onClick:s=>{s.stopPropagation(),be(t.id)},className:`inline-flex items-center gap-1 text-[9px] font-bold px-1.5 py-0.5 rounded-md transition-all cursor-pointer ${r?"bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border border-emerald-200":"bg-red-50 text-red-600 hover:bg-red-100 border border-red-200"}`,title:r?"En stock":"Rupture",children:r?"En stock":"Rupture"})}function ke(t){const r=t.filter(o=>(o.type_piece||"").toLowerCase().includes("ecran")),s=new Set(r.map(o=>o.qualite).filter(Boolean)).size,a=o=>{const l=t.filter(f=>(f.type_piece||"").toLowerCase().includes(o));return l.length?Math.min(...l.map(f=>f.prix_client)):null},c=t.filter(o=>!(o.type_piece||"").toLowerCase().includes("ecran")),n={};for(const o of c){const l=o.type_piece;n[l]||(n[l]=[]),n[l].push(o)}return{qualityCount:s,screenItems:r,batterie:a("batter"),connecteur:a("connect"),camera:a("cam"),otherByType:n,outOfStock:t.filter(o=>o.en_stock===!1).length}}const R=g.reduce((t,r)=>t+r.models.length,0),te=P.batterie,se=P["connecteur de charge"],re=P["camera arriere"];function z({value:t,icon:r,color:s}){return t==null?null:e.jsxs("span",{className:"hidden sm:inline-flex items-center gap-1 text-[11px] px-2 py-0.5 rounded-lg font-semibold border",style:{background:s.bg,color:s.color,borderColor:s.border},children:[e.jsx(r,{className:"w-3 h-3"}),j(t)]})}function L({value:t,icon:r,color:s}){return t==null?null:e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[9px] px-1.5 py-0.5 rounded-md font-bold",style:{background:s.bg,color:s.color},children:[e.jsx(r,{className:"w-2.5 h-2.5"}),j(t)]})}function M({brand:t,model:r,items:s,idx:a}){const c=`${t}::${r}`,n=ue.has(c),o=ke(s);return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>we(c),className:`w-full flex items-center px-5 py-3 text-left transition-colors
            ${a%2===0?"bg-white":"bg-zinc-50/50"} ${n?"!bg-violet-50/60":"hover:bg-violet-50/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[n?e.jsx($,{className:"w-3.5 h-3.5 text-violet-500 shrink-0"}):e.jsx(q,{className:"w-3.5 h-3.5 text-zinc-400 shrink-0"}),e.jsx("span",{className:"font-semibold text-[13px] text-zinc-900 truncate",children:r}),o.qualityCount>0&&e.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-md whitespace-nowrap font-medium ${n?"bg-violet-100 text-violet-700":"bg-zinc-100 text-zinc-500"}`,children:[o.qualityCount," qualit",o.qualityCount>1?"es":"e"]}),o.outOfStock>0&&e.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded-md bg-red-50 text-red-600 border border-red-200 font-bold whitespace-nowrap",children:[o.outOfStock," rupture",o.outOfStock>1?"s":""]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 shrink-0",children:[e.jsx(z,{value:o.batterie,icon:F,color:te}),e.jsx(z,{value:o.connecteur,icon:D,color:se}),e.jsx(z,{value:o.camera,icon:I,color:re})]}),e.jsxs("div",{className:"flex sm:hidden items-center gap-1 shrink-0 ml-2",children:[e.jsx(L,{value:o.batterie,icon:F,color:te}),e.jsx(L,{value:o.connecteur,icon:D,color:se}),e.jsx(L,{value:o.camera,icon:I,color:re})]})]}),n&&e.jsxs("div",{className:"px-5 py-4 bg-violet-50/30 border-t border-violet-100/50",children:[Object.keys(o.otherByType).length>0&&e.jsx("div",{className:"sm:hidden flex flex-wrap gap-2 mb-4",children:Object.entries(o.otherByType).map(([l,f])=>{const x=le(l),S=ae(l);return e.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg border text-xs ${f[0].en_stock===!1?"opacity-50":""}`,style:{background:x.bg,borderColor:f[0].en_stock===!1?"#fca5a5":x.border},children:[e.jsx(S,{className:"w-3 h-3",style:{color:x.color}}),e.jsx("span",{className:"font-medium",style:{color:x.color},children:l}),e.jsx("span",{className:"font-bold",style:{color:x.color},children:j(f[0].prix_client)}),f[0].en_stock===!1&&e.jsx("span",{className:"text-[8px] text-red-500 font-bold",children:"RUPTURE"})]},l)})}),o.screenItems.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(A,{className:"w-4 h-4 text-violet-500"}),e.jsx("span",{className:"text-[11px] font-semibold text-zinc-600 uppercase tracking-wide",children:"Ecrans disponibles"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2.5",children:o.screenItems.map((l,f)=>{const x=De[l.qualite]||Ie;return e.jsxs("div",{className:`rounded-xl border-2 p-3 transition-all hover:shadow-md hover:scale-[1.02] ${l.en_stock===!1?"opacity-50":""}`,style:{background:x.bg,borderColor:l.en_stock===!1?"#fca5a5":x.border},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{background:x.color}}),e.jsx("span",{className:"text-[11px] font-bold",style:{color:x.color},children:l.qualite||"Standard"})]}),e.jsx(ee,{tarif:l})]}),e.jsx("div",{className:"text-2xl font-extrabold leading-none",style:{color:x.color},children:j(l.prix_client)}),b&&d&&l.prix_fournisseur_ht!=null&&e.jsxs("div",{className:"text-[10px] mt-1.5 opacity-50",style:{color:x.color},children:["Achat : ",Number(l.prix_fournisseur_ht).toFixed(2)," ","â‚¬"," HT"]})]},f)})})]}),Object.keys(o.otherByType).length>0&&e.jsxs("div",{className:"hidden sm:block mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(X,{className:"w-4 h-4 text-indigo-400"}),e.jsx("span",{className:"text-[11px] font-semibold text-zinc-600 uppercase tracking-wide",children:"Autres pieces"})]}),e.jsx("div",{className:"grid grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2.5",children:Object.entries(o.otherByType).map(([l,f])=>{const x=le(l),S=ae(l);return f.map((N,Ce)=>e.jsxs("div",{className:`rounded-xl border-2 p-3 hover:shadow-md transition-all hover:scale-[1.02] ${N.en_stock===!1?"opacity-50":""}`,style:{background:x.bg,borderColor:N.en_stock===!1?"#fca5a5":x.border},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(S,{className:"w-3.5 h-3.5",style:{color:x.color}}),e.jsx("span",{className:"text-[10px] font-bold uppercase",style:{color:x.color},children:l})]}),e.jsx(ee,{tarif:N})]}),e.jsx("div",{className:"text-lg font-extrabold",style:{color:x.color},children:j(N.prix_client)}),b&&d&&N.prix_fournisseur_ht!=null&&e.jsxs("div",{className:"text-[10px] mt-1 opacity-60",style:{color:x.color},children:["Achat : ",Number(N.prix_fournisseur_ht).toFixed(2)," ","â‚¬"," HT"]})]},`${l}-${Ce}`))})})]})]})]},r)}function oe({devices:t,label:r,icon:s,color:a,formulaText:c}){return!t.length&&!d?null:e.jsxs("div",{children:[e.jsx("div",{className:"px-5 py-2.5 border-b flex items-center justify-between",style:{background:a.bg,borderColor:a.border},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{className:"w-4 h-4",style:{color:a.text}}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",style:{color:a.text},children:r}),e.jsxs("span",{className:"text-[10px] font-medium opacity-60",style:{color:a.text},children:["(",t.length,")"]})]})}),d&&c&&e.jsx("div",{className:"px-5 py-2 border-b",style:{background:a.formulaBg,borderColor:a.border},children:e.jsxs("span",{className:"text-[13px] font-semibold",style:{color:a.formulaText},children:["ðŸ§®"," ",c]})}),t.length===0?e.jsxs("div",{className:"px-5 py-6 text-center text-xs text-zinc-400",children:["Aucun tarif ",r," pour le moment"]}):e.jsxs("div",{className:"divide-y divide-slate-100",children:[e.jsxs("div",{className:"hidden sm:flex items-center px-5 py-2 bg-zinc-50 text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:[e.jsx("div",{className:"flex-1 pl-2",children:"Modele"}),e.jsx("div",{className:"w-32 text-center",children:"Ecran"}),b&&d&&e.jsx("div",{className:"w-28 text-center",children:"Ecran HT"}),e.jsx("div",{className:"w-32 text-center",children:"Batterie"}),b&&d&&e.jsx("div",{className:"w-28 text-center",children:"Batterie HT"})]}),t.map((n,o)=>e.jsxs("div",{className:`flex flex-col sm:flex-row items-start sm:items-center px-5 py-3 gap-2 sm:gap-0 ${o%2===0?"bg-white":"bg-zinc-50/50"}`,children:[e.jsx("div",{className:"flex-1 pl-2 font-semibold text-[13px] text-zinc-900",children:n.modele}),e.jsx("div",{className:"w-32 text-center",children:n.ecran_prix_vente?e.jsx("span",{className:"font-bold text-sm",style:{color:a.text},children:j(n.ecran_prix_vente)}):e.jsx("span",{className:"text-zinc-300",children:"-"})}),b&&d&&e.jsx("div",{className:"w-28 text-center text-[11px] text-red-400 font-medium",children:n.ecran_prix_ht!=null?`${Number(n.ecran_prix_ht).toFixed(2)} â‚¬ HT`:"-"}),e.jsx("div",{className:"w-32 text-center",children:n.batterie_prix_vente?e.jsx("span",{className:"font-bold text-sm",style:{color:a.text},children:j(n.batterie_prix_vente)}):e.jsx("span",{className:"text-zinc-300",children:"-"})}),b&&d&&e.jsx("div",{className:"w-28 text-center text-[11px] text-red-400 font-medium",children:n.batterie_prix_ht!=null?`${Number(n.batterie_prix_ht).toFixed(2)} â‚¬ HT`:"-"})]},n.id||o))]})]})}const Se={bg:"rgba(59,130,246,0.08)",border:"#3B82F633",text:"#3B82F6",formulaBg:"rgba(59,130,246,0.05)",formulaText:"#60A5FA"},_e={bg:"rgba(139,92,246,0.08)",border:"#8B5CF633",text:"#8B5CF6",formulaBg:"rgba(139,92,246,0.05)",formulaText:"#A78BFA"};return e.jsxs("div",{className:"min-h-screen bg-zinc-50 pb-20",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-100 flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-zinc-900",children:"Grille Tarifaire"}),e.jsx("p",{className:"text-xs text-zinc-500",children:y?`${y.modeles} modeles Â· ${y.marques} marques Â· ${j(y.prix_min)} â†’ ${j(y.prix_max)}`:"Chargement..."})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[d&&e.jsxs("button",{onClick:()=>he(!b),className:"flex items-center gap-1.5 text-[11px] font-semibold px-3 py-2 rounded-lg border transition-all",style:{background:b?"rgba(239,68,68,0.1)":"rgba(100,116,139,0.1)",color:b?"#EF4444":"#64748B",borderColor:b?"#EF444433":"#33415533"},children:[b?e.jsx(Te,{className:"w-3.5 h-3.5"}):e.jsx(Ee,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:b?"Prix HT visibles":"Prix HT masques"})]}),e.jsxs("button",{onClick:ge,disabled:E||T,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(Pe,{className:`w-4 h-4 ${E?"animate-pulse":""}`}),e.jsx("span",{className:"hidden sm:inline",children:E?"Verification...":"Verifier stock"})]}),e.jsxs("button",{onClick:async()=>{K(!0),await B(),K(!1)},disabled:T||E,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-violet-600 hover:bg-violet-700 text-white text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(Ae,{className:`w-4 h-4 ${T?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:T?"Chargement...":"Actualiser"})]})]})]}),h&&!h.error&&e.jsx("div",{className:"mt-3 p-3 rounded-xl bg-emerald-50 border border-emerald-200 text-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-emerald-800",children:[e.jsx("span",{className:"font-semibold",children:h.models_found})," modeles trouves sur Mobilax"," / ",e.jsx("span",{className:"font-semibold",children:h.models_checked})," verifies"," â€” ",e.jsx("span",{className:"font-semibold",children:h.tarifs_updated})," mises a jour",h.now_rupture>0&&e.jsxs("span",{className:"text-red-600 font-semibold ml-2",children:["(",h.now_rupture," ruptures)"]}),h.now_in_stock>0&&e.jsxs("span",{className:"text-emerald-600 font-semibold ml-2",children:["(",h.now_in_stock," retour en stock)"]})]}),e.jsx("button",{onClick:()=>k(null),className:"text-emerald-400 hover:text-emerald-600 text-xs",children:"Ã—"})]})}),(h==null?void 0:h.error)&&e.jsxs("div",{className:"mt-3 p-3 rounded-xl bg-red-50 border border-red-200 text-sm text-red-700",children:["Erreur lors de la verification du stock.",e.jsx("button",{onClick:()=>k(null),className:"ml-2 text-red-400 hover:text-red-600 text-xs",children:"Ã—"})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher un modele...",value:w,onChange:t=>xe(t.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 bg-zinc-50 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/30 focus:border-violet-400 transition-all"})]}),e.jsx("div",{className:"flex gap-1.5 overflow-x-auto scrollbar-none pb-0.5",children:He.filter(t=>t==="Toutes"||g.some(r=>r.brand===t)).map(t=>e.jsx("button",{onClick:()=>{me(t),t==="Toutes"&&(O(new Set),V(new Set),Y(new Set))},className:`px-3 py-2 rounded-lg text-xs font-medium whitespace-nowrap transition-all ${v===t?"bg-zinc-900 text-white shadow-sm":"bg-white border border-slate-200 text-zinc-600 hover:bg-zinc-100"}`,children:t},t))})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 space-y-4",children:U?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"w-10 h-10 border-2 border-violet-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-sm text-zinc-500",children:"Chargement des tarifs..."})]}):g.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(ne,{className:"w-12 h-12 text-zinc-300 mx-auto mb-4"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Aucun tarif trouve"})]}):g.map(({brand:t,models:r})=>{const s=$e[t]||qe,a=fe.has(t),c=t==="Apple";return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("button",{onClick:()=>ve(t),className:"w-full px-5 py-3.5 flex items-center justify-between cursor-pointer transition-opacity hover:opacity-90",style:{background:s.bg,color:s.text},children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[a?e.jsx($,{className:"w-4 h-4 opacity-70"}):e.jsx(q,{className:"w-4 h-4 opacity-70"}),e.jsx(Fe,{slug:s.logo}),e.jsx("span",{className:"font-bold text-sm tracking-wide",children:t})]}),e.jsxs("span",{className:"text-xs opacity-75 font-medium",children:[r.length," modele",r.length>1?"s":""]})]}),a&&c&&e.jsxs("div",{children:[e.jsxs("div",{className:"px-5 py-2.5 border-b flex items-center gap-2",style:{background:"rgba(245,158,11,0.08)",borderColor:"#F59E0B33"},children:[e.jsx(A,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-xs font-bold text-amber-700 uppercase tracking-wider",children:"iPhone"}),e.jsxs("span",{className:"text-[10px] font-medium text-amber-500",children:["(",W.reduce((n,o)=>n+o.models.length,0)," modeles)"]})]}),W.map(({serie:n,models:o})=>{const l=`apple-serie-${n}`,f=pe.has(l);return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>ye(l),className:`w-full flex items-center px-5 py-2.5 text-left transition-colors border-b border-slate-100 ${f?"bg-amber-50/50":"hover:bg-amber-50/30 bg-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[f?e.jsx($,{className:"w-3.5 h-3.5 text-amber-500 shrink-0"}):e.jsx(q,{className:"w-3.5 h-3.5 text-zinc-400 shrink-0"}),e.jsxs("span",{className:"font-bold text-[13px] text-zinc-800",children:["Serie ",n==="X/XS/XR"?n:`iPhone ${n}`]}),e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded-md bg-amber-100 text-amber-700 font-medium",children:[o.length," modele",o.length>1?"s":""]})]})}),f&&e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center px-5 py-2 bg-zinc-100/80 border-b border-slate-200 text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:[e.jsx("div",{className:"flex-1 pl-7",children:"Modele"}),e.jsx("div",{className:"text-right pr-1",children:"Pieces disponibles"})]}),o.map(({model:x,items:S},N)=>e.jsx(M,{brand:"Apple",model:x,items:S,idx:N},x))]})]},n)}),Z.length>0&&Z.map(({model:n,items:o},l)=>e.jsx(M,{brand:"Apple",model:n,items:o,idx:l},n)),e.jsx(oe,{devices:je,label:"iPad",icon:Re,color:Se,formulaText:"Formule : (Prix piece HT \\u00d7 1.2) + 110\\u20ac de main d'oeuvre"}),e.jsx(oe,{devices:Ne,label:"MacBook",icon:ze,color:_e,formulaText:"Formule : (Prix piece HT \\u00d7 1.2) + 120\\u20ac de main d'oeuvre"})]}),a&&!c&&e.jsxs("div",{children:[e.jsxs("div",{className:"hidden sm:flex items-center px-5 py-2 bg-zinc-100/80 border-b border-slate-200 text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:[e.jsx("div",{className:"flex-1 pl-7",children:"Modele"}),e.jsx("div",{className:"text-right pr-1",children:"Pieces disponibles"})]}),r.map(({model:n,items:o},l)=>e.jsx(M,{brand:t,model:n,items:o,idx:l},n))]})]},t)})}),!U&&R>0&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"text-center text-xs text-zinc-400 space-y-1",children:e.jsxs("p",{children:[R," mod","Ã¨","le",R>1?"s":""," ","Â·"," ",g.length," marque",g.length>1?"s":""," ","Â·"," Source : Mobilax"]})})})]})}export{Je as default};
