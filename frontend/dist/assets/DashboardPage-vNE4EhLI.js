import{u as ke,a as F,p as O,j as t,S as te,g as E,f as _e,w as Ce,s as ye,b as Se,c,i as $e}from"./index-Bf3IOOTL.js";import{u as Te,r as n}from"./vendor-react-DWtYaMjq.js";import{c as se,S as ae,W as Pe,m as Ae,P as V,R as Me,G as Ee,J as H,C as Re,X as De,K as le,N as ne,L as ze,O as Be,z as Ie,o as Ke,s as Le,Q as qe,Y as Ue}from"./vendor-icons-CpbMAP_O.js";function Je(){const o=Te(),{user:i}=ke(),x=(i==null?void 0:i.target)==="tech"?"/tech":"/accueil",[R,ie]=n.useState(""),[w,ce]=n.useState(""),[g,D]=n.useState(""),[J,z]=n.useState(null),[B,k]=n.useState(!1),[h,_]=n.useState(new Set),[We,Fe]=n.useState(""),[G,I]=n.useState(!1),[C,re]=n.useState(""),[u,oe]=n.useState(()=>parseInt(localStorage.getItem("kp_page_size")||"50")),[d,f]=n.useState(0),P=n.useRef(null);n.useEffect(()=>(P.current&&clearTimeout(P.current),P.current=setTimeout(()=>ce(R),300),()=>clearTimeout(P.current)),[R]);const de=n.useMemo(()=>{const e=["dashboard"];return w&&e.push(`s:${w}`),g&&e.push(`f:${g}`),e.join(":")},[w,g]),{data:b,loading:K,isRevalidating:me,mutate:y}=F(de,async()=>{const e={limit:200};w&&(e.search=w),g&&(e.statut=g);const[s,l]=await Promise.all([c.getKPI(),c.getTickets(e)]);return{kpi:s,tickets:l}},{tags:["dashboard","tickets"],ttl:3e4}),p=(b==null?void 0:b.kpi)??null,S=(b==null?void 0:b.tickets)??[],{data:xe}=F("team:active",()=>c.getActiveTeam(),{tags:["team"],ttl:3e5}),$=xe??[],Q=n.useMemo(()=>{const e={};return $.forEach(s=>{s.couleur&&(e[s.nom]=s.couleur)}),e},[$]);n.useEffect(()=>{O("clients:p:0:20",()=>c.getClients({limit:20,offset:0}),{tags:["clients"],ttl:6e4}),O("tarifs",()=>Promise.all([c.getTarifs(),c.getTarifsStats(),c.getAppleDevices()]).then(([e,s,l])=>({tarifs:e,stats:s,appleDevices:l})),{tags:["tarifs"],ttl:3e5}),O("config:main",()=>Promise.all([c.getConfig(),c.getActiveTeam()]).then(([e,s])=>({config:e,team:s})),{tags:["config","team"],ttl:3e5})},[]);const X=n.useRef(y);X.current=y,n.useEffect(()=>{const e=setInterval(()=>X.current(),3e4);return()=>clearInterval(e)},[]);const he=e=>{_(s=>{const l=new Set(s);return l.has(e)?l.delete(e):l.add(e),l})},ue=()=>{h.size===j.length?_(new Set):_(new Set(j.map(e=>e.id)))},pe=async e=>{if(h.size!==0)try{await Promise.all([...h].map(s=>c.changeStatus(s,e))),_(new Set),I(!1),$e("tickets","dashboard")}catch(s){console.error(s)}},ge=async(e,s)=>{try{await c.changeStatus(e,s),y(l=>l&&{...l,tickets:l.tickets.map(a=>a.id===e?{...a,statut:s}:a)})}catch(l){console.error(l)}},fe=async(e,s)=>{try{await c.updateTicket(e,{technicien_assigne:s||null}),y(l=>l&&{...l,tickets:l.tickets.map(a=>a.id===e?{...a,technicien_assigne:s||null}:a)})}catch(l){console.error(l)}},be=(e,s)=>{J===s?(z(null),D(""),k(!1)):(z(s),e&&(D(e),k(!1)))},Y=(i==null?void 0:i.target)==="tech",A=i==null?void 0:i.utilisateur,L=(e,s)=>{if(!e||!s)return!1;const l=e.trim(),a=s.trim();return l===a||l.startsWith(a+" ")},q=e=>{if(!e)return null;const s=Q[e];if(s)return s;for(const[l,a]of Object.entries(Q))if(L(e,l))return a;return null},M=n.useMemo(()=>C==="__mine__"&&A?S.filter(e=>L(e.technicien_assigne,A)||!e.technicien_assigne):C?S.filter(e=>L(e.technicien_assigne,C)):S,[S,C,A]),Z=n.useMemo(()=>M.filter(e=>!["Clôturé","Rendu au client"].includes(e.statut)),[M]),ee=n.useMemo(()=>M.filter(e=>["Clôturé","Rendu au client"].includes(e.statut)),[M]),T=B?ee:Z,U=Math.ceil(T.length/u),j=T.slice(d*u,(d+1)*u),je=e=>{oe(e),f(0),localStorage.setItem("kp_page_size",e.toString())},{data:W}=F("commandes:en_cours:count",async()=>{const e=await c.getParts({statut:"en_cours"});return(e==null?void 0:e.length)??0},{tags:["commandes"],ttl:6e4}),ve=p?[{label:"Total actifs",value:p.total_actifs,icon:se,color:"text-brand-600",iconBg:"bg-brand-100"},{label:"Diagnostic",value:p.en_attente_diagnostic,icon:ae,color:"text-amber-600",iconBg:"bg-amber-100",filter:"En attente de diagnostic"},{label:"Réparation",value:p.en_cours,icon:Pe,color:"text-blue-600",iconBg:"bg-blue-100",filter:"En cours de réparation"},{label:"Accord client",value:p.en_attente_accord,icon:Ae,color:"text-orange-600",iconBg:"bg-orange-100",filter:"En attente d'accord client"},{label:"Pièces",value:p.en_attente_piece,icon:V,color:"text-violet-600",iconBg:"bg-violet-100",filter:"En attente de pièce"}]:[],Ne=e=>{if(!e)return{text:"Non définie",color:"text-slate-400",urgent:!1};const s=new Date;let l;if(e.includes("-")&&e.length>=10)l=new Date(e);else{const N=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(N)l=new Date(`${N[3]}-${N[2].padStart(2,"0")}-${N[1].padStart(2,"0")}`);else return{text:e,color:"text-slate-500",urgent:!1}}if(isNaN(l.getTime()))return{text:e,color:"text-slate-500",urgent:!1};const a=l-s,m=Math.round(a/36e5),r=Math.floor(Math.abs(m)/24),v=Math.abs(m)%24;return a>0?{text:r>0?`dans ${r}j ${v}h`:`dans ${Math.abs(m)}h`,color:"text-emerald-600",urgent:!1}:{text:r>0?`DÉPASSÉ ${r}j ${v}h`:`DÉPASSÉ ${Math.abs(m)}h`,color:"text-red-600 font-bold",urgent:!0}},we=[{label:"Tous",value:""},{label:"Diagnostic",value:"En attente de diagnostic"},{label:"Réparation",value:"En cours de réparation"},{label:"Accord",value:"En attente d'accord client"},{label:"Pièces",value:"En attente de pièce"},{label:"Pièce reçue",value:"Pièce reçue"},{label:"Terminés",value:"Réparation terminée"},{label:"Rendus",value:"Rendu au client"},{label:"Clôturés",value:"Clôturé"}];return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:"/logo_k.png",alt:"",className:"w-8 h-8 rounded-lg object-contain shadow-sm hidden sm:block"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-display font-bold text-slate-900 tracking-tight",children:(i==null?void 0:i.target)==="tech"?"Espace Technicien":"Tableau de bord"}),t.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:(i==null?void 0:i.target)==="tech"?`Bienvenue ${(i==null?void 0:i.utilisateur)||""} — vos réparations`:"Vue d'ensemble des réparations"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>y(),className:"btn-ghost p-2.5",title:"Rafraîchir",children:t.jsx(Me,{className:`w-4 h-4 ${K||me?"animate-spin":""}`})}),t.jsxs("button",{onClick:()=>o("/client"),className:"btn-primary",children:[t.jsx(Ee,{className:"w-4 h-4"})," Nouveau ticket"]})]})]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 mb-6",children:!p&&K?Array.from({length:5}).map((e,s)=>t.jsxs("div",{className:"card p-4 animate-pulse",children:[t.jsx("div",{className:"w-9 h-9 rounded-lg bg-slate-100 mb-3"}),t.jsx("div",{className:"h-7 w-12 bg-slate-100 rounded mb-1"}),t.jsx("div",{className:"h-3 w-20 bg-slate-100 rounded"})]},s)):ve.map(({label:e,value:s,icon:l,color:a,iconBg:m,filter:r},v)=>t.jsxs("button",{onClick:()=>be(r,v),className:`card p-4 hover:shadow-md hover:-translate-y-0.5 transition-all duration-200 animate-in text-left
              ${J===v?"ring-2 ring-brand-500 shadow-lg shadow-brand-500/10":""}`,style:{animationDelay:`${v*50}ms`},children:[t.jsx("div",{className:`w-9 h-9 rounded-lg ${m} flex items-center justify-center mb-3`,children:t.jsx(l,{className:`w-4 h-4 ${a}`})}),t.jsx("p",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:s}),t.jsx("p",{className:"text-[11px] text-slate-500 font-medium mt-0.5 leading-tight",children:e})]},e))}),W>0&&t.jsxs("button",{onClick:()=>o(`${x}/commandes`),className:"card px-4 py-3 mb-6 flex items-center gap-3 hover:shadow-md transition-all group w-full text-left",children:[t.jsx("div",{className:"w-9 h-9 rounded-lg bg-amber-100 flex items-center justify-center shrink-0",children:t.jsx(V,{className:"w-4 h-4 text-amber-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("p",{className:"text-sm font-semibold text-slate-800",children:[W," commande",W>1?"s":""," de pièces en cours"]}),t.jsx("p",{className:"text-xs text-slate-400",children:"Cliquez pour voir le détail"})]}),t.jsx(H,{className:"w-4 h-4 text-slate-300 group-hover:text-brand-500 transition-colors"})]}),t.jsxs("div",{className:"card overflow-hidden mb-6",children:[t.jsx("div",{className:"p-3 sm:p-4 border-b border-slate-100",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(ae,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),t.jsx("input",{type:"text",placeholder:"Rechercher par nom, téléphone, code, marque, modèle...",value:R,onChange:e=>{ie(e.target.value),f(0)},className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-200 bg-slate-50/50 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 focus:bg-white transition-all"})]}),$.length>0&&t.jsxs("select",{value:C,onChange:e=>{re(e.target.value),f(0)},className:"px-3 py-2.5 rounded-lg border border-slate-200 bg-slate-50/50 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 min-w-[140px]",children:[t.jsx("option",{value:"",children:"Tous les techs"}),Y&&A&&t.jsx("option",{value:"__mine__",children:"Mes tickets"}),$.map(e=>t.jsx("option",{value:e.nom,children:e.nom},e.id))]})]})}),t.jsx("div",{className:"px-3 sm:px-4 py-2 flex gap-1 overflow-x-auto scrollbar-none bg-slate-50/50",children:we.map(({label:e,value:s})=>t.jsx("button",{onClick:()=>{D(s),z(null),k(["Rendu au client","Clôturé"].includes(s))},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium whitespace-nowrap transition-all
                ${g===s?"bg-brand-600 text-white shadow-sm shadow-brand-600/25":"text-slate-500 hover:bg-white hover:text-slate-700 hover:shadow-sm"}`,children:e},s))})]}),t.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[t.jsxs("button",{onClick:()=>k(!1),className:`text-sm font-medium ${B?"text-slate-400 hover:text-slate-600":"text-brand-600"}`,children:[Z.length," actif(s)"]}),t.jsxs("button",{onClick:()=>k(!0),className:`text-sm font-medium ${B?"text-brand-600":"text-slate-400 hover:text-slate-600"}`,children:["Voir ",ee.length," archivé(s)"]})]}),h.size>0&&t.jsxs("div",{className:"flex items-center gap-3 mb-3 px-4 py-2.5 bg-brand-50 border border-brand-200 rounded-xl animate-in",children:[t.jsxs("span",{className:"text-sm font-semibold text-brand-700",children:[h.size," sélectionné(s)"]}),t.jsxs("div",{className:"relative ml-auto",children:[t.jsxs("button",{onClick:()=>I(!G),className:"btn-primary text-xs px-3 py-1.5",children:["Changer statut ",t.jsx(Re,{className:"w-3.5 h-3.5"})]}),G&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>I(!1)}),t.jsx("div",{className:"absolute right-0 top-full mt-1 w-64 card p-1.5 shadow-xl z-50 animate-in",children:te.map(e=>t.jsx("button",{onClick:()=>pe(e),className:"w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-slate-50 text-slate-700 transition-colors",children:e},e))})]})]}),t.jsx("button",{onClick:()=>_(new Set),className:"btn-ghost p-1.5",children:t.jsx(De,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"card overflow-hidden",children:[t.jsxs("div",{className:"hidden lg:grid grid-cols-[28px_72px_1fr_120px_1fr_100px_150px_72px_80px_72px_28px] gap-2 items-center px-5 py-3 bg-slate-50/80 border-b border-slate-100",children:[t.jsx("button",{onClick:ue,className:"flex items-center justify-center",children:h.size===j.length&&j.length>0?t.jsx(le,{className:"w-4 h-4 text-brand-600"}):t.jsx(ne,{className:"w-4 h-4 text-slate-300"})}),t.jsx("span",{className:"table-header",children:"Ticket"}),t.jsx("span",{className:"table-header",children:"Client"}),t.jsx("span",{className:"table-header",children:"Appareil"}),t.jsx("span",{className:"table-header",children:"Panne"}),t.jsx("span",{className:"table-header",children:"Tech"}),t.jsx("span",{className:"table-header",children:"Statut"}),t.jsx("span",{className:"table-header",children:"Date"}),t.jsx("span",{className:"table-header",children:"Contact"}),t.jsx("span",{className:"table-header text-right",children:"Prix"}),t.jsx("span",{})]}),K&&S.length===0?t.jsx("div",{className:"divide-y divide-slate-100/80",children:Array.from({length:8}).map((e,s)=>t.jsxs("div",{className:"px-5 py-3.5 animate-pulse flex items-center gap-3",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-slate-100 shrink-0"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-4 w-32 bg-slate-100 rounded"}),t.jsx("div",{className:"h-3 w-48 bg-slate-100 rounded"})]}),t.jsx("div",{className:"hidden lg:block h-6 w-20 bg-slate-100 rounded-lg"}),t.jsx("div",{className:"hidden lg:block h-6 w-28 bg-slate-100 rounded-lg"})]},s))}):j.length===0?t.jsxs("div",{className:"py-16 text-center",children:[t.jsx("div",{className:"w-14 h-14 rounded-2xl bg-slate-100 flex items-center justify-center mx-auto mb-4",children:t.jsx(se,{className:"w-7 h-7 text-slate-300"})}),t.jsx("p",{className:"text-slate-500 font-medium",children:"Aucun ticket trouvé"}),t.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Modifiez vos filtres ou créez un nouveau ticket"})]}):t.jsx("div",{className:"divide-y divide-slate-100/80",children:j.map(e=>{var s,l;return t.jsxs("div",{className:"lg:grid lg:grid-cols-[28px_72px_1fr_120px_1fr_100px_150px_72px_80px_72px_28px] gap-2 items-center px-4 sm:px-5 py-3 hover:bg-brand-50/40 transition-colors group",children:[t.jsx("div",{className:"hidden lg:flex items-center justify-center",children:t.jsx("button",{onClick:()=>he(e.id),children:h.has(e.id)?t.jsx(le,{className:"w-4 h-4 text-brand-600"}):t.jsx(ne,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"})})}),t.jsx("div",{className:"cursor-pointer",onClick:()=>o(`${x}/ticket/${e.id}`),children:t.jsxs("div",{className:"flex items-center gap-1",children:[e.attention&&t.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 shrink-0",title:"Attention"}),t.jsx("p",{className:"text-xs font-bold text-brand-600 font-mono",children:e.ticket_code})]})}),t.jsx("div",{className:"min-w-0 mt-1 lg:mt-0 cursor-pointer",onClick:()=>o(`${x}/ticket/${e.id}`),children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-brand-100 flex items-center justify-center shrink-0",children:t.jsxs("span",{className:"text-brand-700 font-bold text-[10px]",children:[(((s=e.client_prenom)==null?void 0:s[0])||"").toUpperCase(),(((l=e.client_nom)==null?void 0:l[0])||"").toUpperCase()]})}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("p",{className:"text-sm font-semibold text-slate-800 truncate",children:[e.client_prenom||""," ",e.client_nom||""]}),t.jsx("p",{className:"text-[11px] text-slate-400 font-mono truncate",children:e.client_tel||""})]})]})}),t.jsxs("div",{className:"hidden lg:block cursor-pointer",onClick:()=>o(`${x}/ticket/${e.id}`),children:[t.jsxs("p",{className:"text-xs text-slate-700 font-medium truncate",children:[e.marque," ",e.modele||e.modele_autre]}),Y&&(e.pin||e.pattern)&&t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.pin&&t.jsxs("span",{className:"text-[10px] font-mono text-amber-600 flex items-center gap-0.5",children:[t.jsx(ze,{className:"w-2.5 h-2.5"})," ",e.pin]}),e.pattern&&t.jsxs("span",{className:"text-[10px] font-mono text-violet-600 flex items-center gap-0.5",children:[t.jsx(Be,{className:"w-2.5 h-2.5"})," ",e.pattern]})]})]}),t.jsx("div",{className:"hidden lg:block cursor-pointer",onClick:()=>o(`${x}/ticket/${e.id}`),children:e.commande_piece===1?t.jsxs("p",{className:"text-xs text-amber-600 font-medium truncate flex items-center gap-1",children:[t.jsx(V,{className:"w-3 h-3 shrink-0"})," Pièce à commander"]}):(()=>{let a=[];try{const m=JSON.parse(e.reparation_supp||"[]");Array.isArray(m)&&(a=m.filter(r=>r.label).map(r=>r.label))}catch{}return a.length===0&&e.panne&&(a=[e.panne]),t.jsx("p",{className:"text-xs text-slate-600 truncate",title:a.join(" + "),children:a.join(" + ")||"—"})})()}),t.jsx("div",{className:"hidden lg:block",onClick:a=>a.stopPropagation(),children:t.jsxs("select",{value:e.technicien_assigne||"",onChange:a=>fe(e.id,a.target.value),className:"w-full py-1.5 px-2 text-[11px] font-medium rounded-lg border cursor-pointer appearance-none bg-no-repeat truncate transition-colors",style:{borderColor:e.technicien_assigne?q(e.technicien_assigne)||"#94a3b8":"#e2e8f0",color:e.technicien_assigne?"#334155":"#94a3b8",backgroundColor:e.technicien_assigne&&q(e.technicien_assigne)?q(e.technicien_assigne)+"15":"#f8fafc",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E")`,backgroundPosition:"right 4px center",backgroundSize:"12px",paddingRight:"20px"},children:[t.jsx("option",{value:"",children:"— Aucun"}),$.map(a=>t.jsx("option",{value:a.nom,children:a.nom},a.id))]})}),t.jsx("div",{className:"mt-2 lg:mt-0",onClick:a=>a.stopPropagation(),children:t.jsx("select",{value:e.statut,onChange:a=>ge(e.id,a.target.value),className:"w-full py-1.5 px-2 text-[11px] font-semibold rounded-lg border-2 cursor-pointer appearance-none bg-no-repeat truncate",style:{borderColor:E(e.statut).color,color:E(e.statut).color,backgroundColor:E(e.statut).color+"10",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='${encodeURIComponent(E(e.statut).color)}' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E")`,backgroundPosition:"right 4px center",backgroundSize:"14px",paddingRight:"22px"},children:te.map(a=>t.jsx("option",{value:a,children:a},a))})}),t.jsxs("div",{className:"hidden lg:block cursor-pointer",onClick:()=>o(`${x}/ticket/${e.id}`),children:[t.jsx("p",{className:"text-[11px] text-slate-500",children:_e(e.date_depot)}),e.date_recuperation&&(()=>{const a=Ne(e.date_recuperation);return t.jsxs("p",{className:`text-[10px] flex items-center gap-0.5 mt-0.5 ${a.color}`,children:[t.jsx(Ie,{className:"w-2.5 h-2.5"})," ",a.text]})})()]}),t.jsxs("div",{className:"flex items-center gap-1 mt-2 lg:mt-0",children:[t.jsx("a",{href:e.client_tel?Ce(e.client_tel,`Bonjour, concernant votre ticket ${e.ticket_code}...`):"#",target:"_blank",rel:"noopener noreferrer",onClick:a=>{e.client_tel||a.preventDefault(),a.stopPropagation()},className:"p-1.5 rounded-md hover:bg-green-50 transition-colors",title:"WhatsApp",children:t.jsx(Ke,{className:`w-3.5 h-3.5 ${e.msg_whatsapp?"text-green-500":"text-slate-300"}`})}),t.jsx("a",{href:e.client_tel?ye(e.client_tel,`Klikphone: Votre ticket ${e.ticket_code}...`):"#",onClick:a=>{e.client_tel||a.preventDefault(),a.stopPropagation()},className:"p-1.5 rounded-md hover:bg-blue-50 transition-colors",title:"SMS",children:t.jsx(Le,{className:`w-3.5 h-3.5 ${e.msg_sms?"text-blue-500":"text-slate-300"}`})}),t.jsx("a",{href:e.client_email?`mailto:${e.client_email}`:"#",onClick:a=>{e.client_email||a.preventDefault(),a.stopPropagation()},className:"p-1.5 rounded-md hover:bg-amber-50 transition-colors",title:"Email",children:t.jsx(qe,{className:`w-3.5 h-3.5 ${e.msg_email?"text-amber-500":"text-slate-300"}`})})]}),t.jsx("div",{className:"hidden lg:block text-right cursor-pointer",onClick:()=>o(`${x}/ticket/${e.id}`),children:e.devis_estime||e.tarif_final?t.jsx("p",{className:"text-xs font-semibold text-slate-800",children:Se(e.tarif_final||e.devis_estime)}):t.jsx("p",{className:"text-xs text-slate-300",children:"—"})}),t.jsx("div",{className:"hidden lg:flex justify-end cursor-pointer",onClick:()=>o(`${x}/ticket/${e.id}`),children:t.jsx(H,{className:"w-4 h-4 text-slate-300 group-hover:text-brand-500 transition-colors"})})]},e.id)})}),T.length>u&&t.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-t border-slate-100 bg-slate-50/50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-slate-500",children:[d*u+1,"–",Math.min((d+1)*u,T.length)," sur ",T.length]}),t.jsx("select",{value:u,onChange:e=>je(Number(e.target.value)),className:"text-xs border border-slate-200 rounded-md px-2 py-1 bg-white text-slate-600",children:[10,25,50,100].map(e=>t.jsxs("option",{value:e,children:[e," / page"]},e))})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>f(e=>Math.max(0,e-1)),disabled:d===0,className:"p-1.5 rounded-md hover:bg-slate-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:t.jsx(Ue,{className:"w-4 h-4 text-slate-600"})}),Array.from({length:U},(e,s)=>t.jsx("button",{onClick:()=>f(s),className:`w-7 h-7 rounded-md text-xs font-medium transition-colors ${s===d?"bg-brand-600 text-white":"text-slate-500 hover:bg-slate-100"}`,children:s+1},s)).slice(Math.max(0,d-2),d+3),t.jsx("button",{onClick:()=>f(e=>Math.min(U-1,e+1)),disabled:d>=U-1,className:"p-1.5 rounded-md hover:bg-slate-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:t.jsx(H,{className:"w-4 h-4 text-slate-600"})})]})]})]})]})}export{Je as default};
