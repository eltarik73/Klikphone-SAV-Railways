import{a as R,j as e,c as x,i as j}from"./index-DVixdJLv.js";import{r as i}from"./vendor-react-DWtYaMjq.js";import{f as at,F as q,y as rt,aG as ye,d as nt,aH as lt,a4 as Q,_ as we,a as it,ac as ot,p as X,q as C,r as ze,a7 as ct,o as O,aI as Ae,aJ as Te,aK as _e,aL as $e,aM as dt,aN as xt,Q as mt,O as ut,D as ke,au as ht,aO as gt,U as bt,X as Ce}from"./vendor-icons-wQijRC-r.js";function U({platform:o,size:m=16}){const c={google:{icon:Ae,color:"#16a34a"},instagram:{icon:Te,color:"#e11d48"},facebook:{icon:_e,color:"#2563eb"},linkedin:{icon:$e,color:"#1d4ed8"}},p=c[o]||c.google;return e.jsx(p.icon,{style:{color:p.color,width:m,height:m}})}function pt({statut:o}){const m={publi√©:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200"},programm√©:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"},brouillon:{bg:"bg-zinc-100",text:"text-zinc-600",border:"border-zinc-200"},erreur:{bg:"bg-red-50",text:"text-red-600",border:"border-red-200"}},c=m[o]||m.brouillon;return e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full border ${c.bg} ${c.text} ${c.border}`,children:o})}function Se(o){const m=[],c=new Date(o);c.setDate(c.getDate()-c.getDay()+1);for(let p=0;p<7;p++){const f=new Date(c);f.setDate(c.getDate()+p),m.push(f)}return m}function Pe(o){return o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):""}function ft(o){return new Date(o).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}const De=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];function yt(){var je,ve,Ne;const[o,m]=i.useState("posts"),[c,p]=i.useState(""),[f,Ee]=i.useState(""),[S,Y]=i.useState("google"),[v,Z]=i.useState("promo"),[D,A]=i.useState(""),[ee,te]=i.useState(!1),[u,T]=i.useState(null),[N,y]=i.useState(""),[_,se]=i.useState(!1),[P,g]=i.useState(!1),[$,K]=i.useState(""),[w,ae]=i.useState(()=>new Date),[Ie,W]=i.useState(!1),[d,z]=i.useState({titre:"",type:"post",date:"",heure:"10:00",couleur:"#7C3AED"}),[Le,H]=i.useState(null),[B,re]=i.useState(""),[ne,le]=i.useState("10:00"),[ie,E]=i.useState(null),[I,b]=i.useState(null),[L,F]=i.useState(null),Fe=o==="posts"?`cm:posts:${c}:${f}`:null,{data:oe,loading:Ge}=R(Fe,async()=>{const t={};return c&&(t.plateforme=c),f&&(t.statut=f),x.getMarketingPosts(t)},{tags:["marketing-posts"],ttl:12e4}),ce=Array.isArray(oe)?oe:[],Me=o==="calendrier"?`cm:cal:${w.toISOString().split("T")[0]}`:null,{data:de,loading:Re}=R(Me,async()=>{const t=Se(w),s=t[0].toISOString().split("T")[0],a=t[6].toISOString().split("T")[0];return x.getCalendrierMarketing({date_debut:s,date_fin:a})},{tags:["marketing-calendar"],ttl:12e4}),xe=Array.isArray(de)?de:[],Oe=o==="templates"?"cm:templates":null,{data:me,loading:Ue}=R(Oe,()=>x.getMarketingTemplates(),{tags:["marketing-templates"],ttl:3e5}),ue=Array.isArray(me)?me:[],Ke=o==="analytics"?"cm:analytics":null,{data:k,loading:We}=R(Ke,async()=>{const[t,s]=await Promise.all([x.getMarketingAnalytics(),x.getMarketingAnalyticsPosts()]);return{analytics:t||null,analyticsPosts:Array.isArray(s)?s:[]}},{tags:["marketing-analytics"],ttl:12e4}),r=(k==null?void 0:k.analytics)??null,he=(k==null?void 0:k.analyticsPosts)??[],G=Ge||Re||Ue||We,He=async()=>{if(D.trim()){te(!0);try{const t=await x.genererPost({plateforme:S,type_contenu:v,contexte:D});T(t)}catch(t){console.error("Erreur g√©n√©ration:",t)}finally{te(!1)}}},ge=async()=>{const t=$.trim();if(t){se(!0),g(!0),y("");try{const s=await x.genererImage({prompt:t});s.image_url?y(s.image_url):g(!1)}catch(s){console.error("Erreur g√©n√©ration image:",s),g(!1)}finally{se(!1)}}},Be=async t=>{try{await x.createMarketingPost({titre:t.titre||`Post ${v}`,contenu:t.contenu||"",plateforme:t.plateforme||S,type_contenu:t.type_contenu||v,hashtags:t.hashtags||[],image_url:N||null,statut:"brouillon"}),T(null),A(""),y(""),K(""),j("marketing-posts")}catch(s){console.error("Erreur sauvegarde:",s)}},Je=async t=>{F(t),b(null);try{const s=await x.publierPost(t),a=s.platforms_published||[],l=s.warning||"",h=l?`${l} (${a.join(", ")})`:`Publi√© sur ${a.join(", ")||"les r√©seaux"}`;b({success:!0,message:h,platforms:a}),j("marketing-posts")}catch(s){console.error("Erreur publication:",s);const a=(s==null?void 0:s.message)||"Erreur lors de la publication";b({success:!1,message:a})}finally{F(null),setTimeout(()=>b(null),6e3)}},Ve=async t=>{F("gen"),b(null);try{const s={titre:t.titre||`Post ${v}`,contenu:t.contenu||"",plateforme:t.plateforme||S,type_contenu:t.type_contenu||v,hashtags:t.hashtags||[],image_url:N||null,statut:"brouillon"},a=await x.createMarketingPost(s);if(a&&a.id){const l=await x.publierPost(a.id),h=l.platforms_published||[],n=l.warning||"",V=n?`${n} (${h.join(", ")})`:`Publi√© sur ${h.join(", ")||"les r√©seaux"}`;b({success:!0,message:V,platforms:h})}T(null),A(""),y(""),K(""),j("marketing-posts")}catch(s){console.error("Erreur publication:",s);const a=(s==null?void 0:s.message)||"Erreur lors de la publication";b({success:!1,message:a})}finally{F(null),setTimeout(()=>b(null),6e3)}},qe=async t=>{if(window.confirm("Supprimer ce brouillon ?"))try{await x.deleteMarketingPost(t),j("marketing-posts")}catch(s){console.error("Erreur suppression:",s)}},Qe=async t=>{if(B)try{await x.programmerPost(t,{date_programmee:`${B}T${ne}:00`}),H(null),re(""),le("10:00"),j("marketing-posts")}catch(s){console.error("Erreur programmation:",s)}},Xe=async()=>{if(!(!d.titre.trim()||!d.date))try{await x.createCalendrierEvent({...d,date_heure:`${d.date}T${d.heure}:00`}),z({titre:"",type:"post",date:"",heure:"10:00",couleur:"#7C3AED"}),W(!1),j("marketing-calendar")}catch(t){console.error("Erreur ajout √©v√©nement:",t)}},be=async t=>{try{await x.deleteCalendrierEvent(t),j("marketing-calendar")}catch(s){console.error("Erreur suppression √©v√©nement:",s)}},Ye=t=>{m("posts"),t.plateforme&&Y(t.plateforme),t.type_contenu&&Z(t.type_contenu),A(t.contenu||t.description||""),T(null)};async function pe(t,s){try{await navigator.clipboard.writeText(t),E(s),setTimeout(()=>E(null),2e3)}catch{const l=document.createElement("textarea");l.value=t,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),E(s),setTimeout(()=>E(null),2e3)}}function fe(t){let s=t.contenu||"";const a=Array.isArray(t.hashtags)?t.hashtags:[];return a.length>0&&(s+=`

`+a.map(l=>l.startsWith("#")?l:`#${l}`).join(" ")),s}const J=i.useMemo(()=>Se(w),[w]),Ze=()=>{const t=new Date(w);t.setDate(t.getDate()-7),ae(t)},et=()=>{const t=new Date(w);t.setDate(t.getDate()+7),ae(t)},tt=[{id:"posts",label:"Posts",icon:q},{id:"calendrier",label:"Calendrier",icon:rt},{id:"templates",label:"Templates",icon:ye},{id:"analytics",label:"Analytics",icon:nt}],st=[{id:"google",icon:Ae,label:"Google"},{id:"instagram",icon:Te,label:"Instagram"},{id:"facebook",icon:_e,label:"Facebook"},{id:"linkedin",icon:$e,label:"LinkedIn"}],M=()=>e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"w-8 h-8 border-2 border-violet-600 border-t-transparent rounded-full animate-spin"})});return e.jsxs("div",{className:"min-h-screen bg-zinc-50 pb-20",children:[e.jsx("div",{className:"sticky top-0 z-30 bg-white border-b border-slate-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 py-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-100 flex items-center justify-center shrink-0",children:e.jsx(at,{className:"w-5 h-5 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-zinc-900 tracking-tight",children:"Community Manager"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"G√©rez vos r√©seaux sociaux et votre pr√©sence en ligne"})]})]}),e.jsx("div",{className:"flex items-center gap-1 bg-zinc-100 rounded-xl p-1",children:tt.map(({id:t,label:s,icon:a})=>e.jsxs("button",{onClick:()=>m(t),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all ${o===t?"bg-violet-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 hover:bg-white"}`,children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:s})]},t))})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[o==="posts"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{value:c,onChange:t=>p(t.target.value),className:"px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500",children:[e.jsx("option",{value:"",children:"Toutes les plateformes"}),e.jsx("option",{value:"google",children:"Google"}),e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"})]}),e.jsxs("select",{value:f,onChange:t=>Ee(t.target.value),className:"px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500",children:[e.jsx("option",{value:"",children:"Tous les statuts"}),e.jsx("option",{value:"brouillon",children:"Brouillon"}),e.jsx("option",{value:"programm√©",children:"Programm√©"}),e.jsx("option",{value:"publi√©",children:"Publi√©"}),e.jsx("option",{value:"erreur",children:"Erreur"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 px-4 py-3 rounded-xl bg-blue-50 border border-blue-200",children:[e.jsx(lt,{className:"w-4 h-4 text-blue-500 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("span",{className:"font-semibold",children:"Publication :"})," Quand vous publiez un post, le contenu est copi√© automatiquement et vous pouvez le coller directement sur la plateforme choisie."]})]}),G?e.jsx(M,{}):ce.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-12 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-zinc-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(q,{className:"w-7 h-7 text-zinc-300"})}),e.jsx("p",{className:"text-zinc-500 font-medium",children:"Aucun post trouv√©"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Utilisez le g√©n√©rateur IA pour cr√©er votre premier post"})]}):e.jsx("div",{className:"space-y-3",children:ce.map(t=>e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{platform:t.plateforme,size:18}),e.jsx("span",{className:"text-sm font-semibold text-zinc-900 flex-1 truncate",children:t.titre||"Sans titre"}),e.jsx(pt,{statut:t.statut})]}),t.image_url&&e.jsx("div",{className:"mb-2 rounded-lg overflow-hidden border border-slate-100",children:e.jsx("img",{src:t.image_url,alt:"",className:"w-full h-28 object-cover",loading:"lazy",onError:s=>{s.target.style.display="none"}})}),t.contenu&&e.jsx("p",{className:"text-sm text-zinc-600 line-clamp-2 mb-3",children:t.contenu}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[t.date_creation&&e.jsx("span",{className:"text-xs text-zinc-400 shrink-0",children:Pe(t.date_creation)}),t.hashtags&&t.hashtags.length>0&&e.jsxs("div",{className:"flex items-center gap-1 overflow-hidden",children:[(Array.isArray(t.hashtags)?t.hashtags:[]).slice(0,3).map((s,a)=>e.jsxs("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded-full bg-violet-50 text-violet-600 border border-violet-100 truncate",children:["#",s]},a)),Array.isArray(t.hashtags)&&t.hashtags.length>3&&e.jsxs("span",{className:"text-[10px] text-zinc-400",children:["+",t.hashtags.length-3]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>pe(fe(t),`post-${t.id}`),className:"p-1.5 rounded-lg hover:bg-zinc-100 text-zinc-400 hover:text-zinc-600 transition-colors",title:"Copier",children:ie===`post-${t.id}`?e.jsx(Q,{className:"w-4 h-4 text-emerald-500"}):e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 rounded-lg hover:bg-zinc-100 text-zinc-400 hover:text-zinc-600 transition-colors",title:"Voir",children:e.jsx(it,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 rounded-lg hover:bg-zinc-100 text-zinc-400 hover:text-zinc-600 transition-colors",title:"Modifier",children:e.jsx(ot,{className:"w-4 h-4"})}),t.statut==="brouillon"&&e.jsx("button",{onClick:()=>qe(t.id),className:"p-1.5 rounded-lg hover:bg-red-50 text-zinc-400 hover:text-red-500 transition-colors",title:"Supprimer",children:e.jsx(X,{className:"w-4 h-4"})})]})]}),t.statut==="brouillon"&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-100",children:[e.jsx("button",{onClick:()=>Je(t.id),disabled:L===t.id,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-50 text-emerald-700 text-xs font-semibold hover:bg-emerald-100 transition-colors disabled:opacity-50",children:L===t.id?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-3.5 h-3.5 animate-spin"})," Publication..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-3.5 h-3.5"})," Publier via Late"]})}),Le===t.id?e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("input",{type:"date",value:B,onChange:s=>re(s.target.value),className:"px-2 py-1.5 rounded-lg border border-slate-200 text-xs focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"}),e.jsx("input",{type:"time",value:ne,onChange:s=>le(s.target.value),className:"px-2 py-1.5 rounded-lg border border-slate-200 text-xs focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"}),e.jsx("button",{onClick:()=>Qe(t.id),className:"px-2 py-1.5 rounded-lg bg-blue-600 text-white text-xs font-semibold hover:bg-blue-700 transition-colors",children:"OK"}),e.jsx("button",{onClick:()=>H(null),className:"px-2 py-1.5 rounded-lg text-xs text-zinc-500 hover:text-zinc-700",children:"Annuler"})]}):e.jsxs("button",{onClick:()=>H(t.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-blue-50 text-blue-700 text-xs font-semibold hover:bg-blue-100 transition-colors",children:[e.jsx(ct,{className:"w-3.5 h-3.5"})," Programmer"]})]})]},t.id))})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"bg-violet-50 rounded-2xl border border-violet-200 shadow-sm p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(O,{className:"w-5 h-5 text-violet-600"}),e.jsx("h2",{className:"text-base font-bold text-zinc-900",children:"G√©n√©rer un post"})]}),e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-2",children:"Plateforme"}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:st.map(({id:t,icon:s,label:a})=>e.jsxs("button",{onClick:()=>Y(t),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium transition-all border ${S===t?"bg-violet-600 text-white border-violet-600 shadow-sm":"bg-white text-zinc-600 border-slate-200 hover:border-violet-300"}`,title:a,children:[e.jsx(s,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:a})]},t))}),e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-2",children:"Type de contenu"}),e.jsxs("select",{value:v,onChange:t=>Z(t.target.value),className:"w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 mb-4 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500",children:[e.jsx("option",{value:"promo",children:"Promo"}),e.jsx("option",{value:"actualite",children:"Actualit√©"}),e.jsx("option",{value:"conseil",children:"Conseil"}),e.jsx("option",{value:"temoignage",children:"T√©moignage"}),e.jsx("option",{value:"stats",children:"Stats"})]}),e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-2",children:"Contexte"}),e.jsx("textarea",{value:D,onChange:t=>A(t.target.value),placeholder:"D√©crivez le contexte du post...",rows:4,className:"w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 resize-none mb-4 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 placeholder:text-zinc-400"}),e.jsxs("label",{className:"block text-xs font-semibold text-zinc-600 mb-2",children:["Image ",e.jsx("span",{className:"text-zinc-400 font-normal",children:"(obligatoire pour Instagram)"})]}),e.jsx("div",{className:"mb-4",children:N?e.jsxs("div",{className:"relative rounded-xl overflow-hidden border border-slate-200 bg-zinc-50",children:[P&&e.jsxs("div",{className:"w-full h-52 flex flex-col items-center justify-center gap-2 bg-gradient-to-br from-violet-50 to-indigo-50",children:[e.jsx(C,{className:"w-8 h-8 animate-spin text-violet-500"}),e.jsx("span",{className:"text-xs text-violet-600 font-medium",children:"G√©n√©ration en cours..."}),e.jsx("span",{className:"text-[10px] text-zinc-400",children:"Peut prendre 10-30 secondes"})]}),e.jsx("img",{src:N,alt:"Aper√ßu",className:`w-full h-52 object-cover ${P?"hidden":""}`,onLoad:()=>g(!1),onError:t=>{g(!1),t.target.src="",t.target.className="hidden"}}),!P&&e.jsxs("div",{className:"absolute bottom-0 inset-x-0 flex gap-1.5 p-2 bg-gradient-to-t from-black/60 to-transparent",children:[e.jsxs("button",{onClick:ge,disabled:_||!$.trim(),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-white/90 text-zinc-700 text-xs font-semibold hover:bg-white transition-colors",children:[_?e.jsx(C,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(O,{className:"w-3.5 h-3.5"}),"R√©g√©n√©rer"]}),e.jsxs("button",{onClick:()=>{y(""),g(!1)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-white/90 text-red-600 text-xs font-semibold hover:bg-white transition-colors",children:[e.jsx(xt,{className:"w-3.5 h-3.5"})," Changer"]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:$,onChange:t=>K(t.target.value),placeholder:"D√©crivez l'image souhait√©e... Ex: iPhone 15 Pro pos√© sur un bureau en bois avec des outils de r√©paration",rows:2,className:"w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 resize-none focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 placeholder:text-zinc-400"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:ge,disabled:_||!$.trim(),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-gradient-to-r from-violet-600 to-indigo-600 text-white text-sm font-semibold hover:from-violet-700 hover:to-indigo-700 disabled:opacity-50 transition-all shadow-sm",children:_?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 animate-spin"})," G√©n√©ration IA..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"w-4 h-4"})," G√©n√©rer l'image"]})}),e.jsx("span",{className:"flex items-center text-xs text-zinc-400",children:"ou"}),e.jsx("input",{type:"url",onChange:t=>{y(t.target.value),g(!0)},placeholder:"Coller URL Midjourney",className:"w-44 px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 placeholder:text-zinc-400"})]})]})}),e.jsx("button",{onClick:He,disabled:ee||!D.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-violet-600 text-white font-semibold text-sm hover:bg-violet-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm",children:ee?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"G√©n√©ration en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4"}),"G√©n√©rer avec l'IA"]})})]}),u&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 animate-in",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(U,{platform:u.plateforme||S,size:18}),e.jsx("span",{className:"text-sm font-bold text-zinc-900",children:u.titre||"Post g√©n√©r√©"})]}),e.jsx("p",{className:"text-sm text-zinc-600 mb-3 whitespace-pre-wrap",children:u.contenu}),N&&e.jsxs("div",{className:"mb-3 rounded-xl overflow-hidden border border-slate-200 bg-zinc-50",children:[P&&e.jsx("div",{className:"w-full h-32 flex items-center justify-center bg-violet-50",children:e.jsx(C,{className:"w-5 h-5 animate-spin text-violet-500"})}),e.jsx("img",{src:N,alt:"Image du post",className:`w-full h-32 object-cover ${P?"hidden":""}`,onLoad:()=>g(!1),onError:t=>{g(!1),t.target.className="hidden"}})]}),u.hashtags&&u.hashtags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-4",children:(Array.isArray(u.hashtags)?u.hashtags:[]).map((t,s)=>e.jsxs("span",{className:"text-[11px] font-medium px-2 py-0.5 rounded-full bg-violet-50 text-violet-600 border border-violet-100",children:["#",t]},s))}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:()=>Be(u),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl bg-violet-600 text-white text-sm font-semibold hover:bg-violet-700 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"Sauvegarder en brouillon"]}),e.jsx("button",{onClick:()=>Ve(u),disabled:L==="gen",className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl bg-emerald-600 text-white text-sm font-semibold hover:bg-emerald-700 transition-colors disabled:opacity-50",children:L==="gen"?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 animate-spin"})," Publication..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-4 h-4"})," Publier maintenant"]})}),e.jsx("button",{onClick:()=>pe(fe(u),"gen-copy"),className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl border-2 border-slate-200 text-zinc-600 text-sm font-medium hover:bg-zinc-50 transition-colors",children:ie==="gen-copy"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 text-emerald-500"})," Copi√© !"]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-4 h-4"})," Copier"]})})]})]})]})]}),o==="calendrier"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-5 py-3",children:[e.jsx("button",{onClick:Ze,className:"p-2 rounded-lg hover:bg-zinc-100 text-zinc-500 hover:text-zinc-700 transition-colors",children:e.jsx(mt,{className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-sm font-bold text-zinc-900",children:["Semaine du ",ft(J[0])]}),e.jsx("button",{onClick:et,className:"p-2 rounded-lg hover:bg-zinc-100 text-zinc-500 hover:text-zinc-700 transition-colors",children:e.jsx(ut,{className:"w-5 h-5"})})]}),G?e.jsx(M,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:grid grid-cols-7 gap-2",children:J.map((t,s)=>{const a=t.toISOString().split("T")[0],l=new Date().toISOString().split("T")[0]===a,h=xe.filter(n=>(n.date_heure||n.date||"").split("T")[0]===a);return e.jsxs("div",{className:`bg-white rounded-xl border shadow-sm min-h-[180px] ${l?"border-violet-300 ring-1 ring-violet-100":"border-slate-200"}`,children:[e.jsxs("div",{className:`px-3 py-2 border-b text-center ${l?"bg-violet-50 border-violet-100":"bg-zinc-50 border-slate-100"}`,children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:De[s]}),e.jsx("div",{className:`text-lg font-bold ${l?"text-violet-600":"text-zinc-900"}`,children:t.getDate()})]}),e.jsx("div",{className:"p-2 space-y-1.5",children:h.map(n=>e.jsxs("div",{className:"group relative rounded-lg p-2 text-xs bg-zinc-50 hover:bg-zinc-100 transition-colors",style:{borderLeft:`3px solid ${n.couleur||"#7C3AED"}`},children:[e.jsx("div",{className:"font-semibold text-zinc-800 truncate",children:n.titre}),n.heure&&e.jsx("div",{className:"text-zinc-400 mt-0.5",children:n.heure}),n.type&&e.jsx("span",{className:"inline-block mt-1 text-[9px] font-bold px-1.5 py-0.5 rounded-full bg-violet-50 text-violet-600 border border-violet-100",children:n.type}),e.jsx("button",{onClick:()=>be(n.id),className:"absolute top-1 right-1 p-0.5 rounded opacity-0 group-hover:opacity-100 hover:bg-red-100 text-zinc-400 hover:text-red-500 transition-all",children:e.jsx(X,{className:"w-3 h-3"})})]},n.id))})]},s)})}),e.jsx("div",{className:"md:hidden space-y-2",children:J.map((t,s)=>{const a=t.toISOString().split("T")[0],l=new Date().toISOString().split("T")[0]===a,h=xe.filter(n=>(n.date_heure||n.date||"").split("T")[0]===a);return e.jsxs("div",{className:`bg-white rounded-xl border shadow-sm p-3 ${l?"border-violet-300":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`text-sm font-bold ${l?"text-violet-600":"text-zinc-900"}`,children:[De[s]," ",t.getDate()]}),l&&e.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-violet-100 text-violet-600",children:"Aujourd'hui"})]}),h.length===0?e.jsx("p",{className:"text-xs text-zinc-400 italic",children:"Aucun √©v√©nement"}):e.jsx("div",{className:"space-y-1.5",children:h.map(n=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg p-2 bg-zinc-50",style:{borderLeft:`3px solid ${n.couleur||"#7C3AED"}`},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-800",children:n.titre}),e.jsxs("div",{className:"text-[10px] text-zinc-400",children:[n.heure," ",n.type&&`¬∑ ${n.type}`]})]}),e.jsx("button",{onClick:()=>be(n.id),className:"p-1 rounded hover:bg-red-100 text-zinc-400 hover:text-red-500 transition-colors",children:e.jsx(X,{className:"w-3.5 h-3.5"})})]},n.id))})]},s)})})]}),Ie?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5",children:[e.jsx("h3",{className:"text-sm font-bold text-zinc-900 mb-4",children:"Ajouter un √©v√©nement"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Titre"}),e.jsx("input",{type:"text",value:d.titre,onChange:t=>z({...d,titre:t.target.value}),placeholder:"Titre de l'√©v√©nement",className:"w-full px-3 py-2 rounded-xl border border-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Type"}),e.jsxs("select",{value:d.type,onChange:t=>z({...d,type:t.target.value}),className:"w-full px-3 py-2 rounded-xl border border-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500",children:[e.jsx("option",{value:"post",children:"Post"}),e.jsx("option",{value:"story",children:"Story"}),e.jsx("option",{value:"campagne",children:"Campagne"}),e.jsx("option",{value:"evenement",children:"√âv√©nement"}),e.jsx("option",{value:"autre",children:"Autre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:d.date,onChange:t=>z({...d,date:t.target.value}),className:"w-full px-3 py-2 rounded-xl border border-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Heure"}),e.jsx("input",{type:"time",value:d.heure,onChange:t=>z({...d,heure:t.target.value}),className:"w-full px-3 py-2 rounded-xl border border-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Couleur"}),e.jsx("div",{className:"flex items-center gap-2",children:["#7C3AED","#2563eb","#16a34a","#e11d48","#ea580c","#0891b2"].map(t=>e.jsx("button",{onClick:()=>z({...d,couleur:t}),className:`w-7 h-7 rounded-full border-2 transition-all ${d.couleur===t?"border-zinc-900 scale-110":"border-transparent"}`,style:{backgroundColor:t}},t))})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsxs("button",{onClick:Xe,disabled:!d.titre.trim()||!d.date,className:"flex items-center gap-1.5 px-4 py-2 rounded-xl bg-violet-600 text-white text-sm font-semibold hover:bg-violet-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(ke,{className:"w-4 h-4"})," Ajouter"]}),e.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 rounded-xl text-sm text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100 transition-colors",children:"Annuler"})]})]}):e.jsxs("button",{onClick:()=>W(!0),className:"w-full py-3 rounded-2xl border-2 border-dashed border-slate-300 text-sm font-semibold text-zinc-500 hover:border-violet-400 hover:text-violet-600 hover:bg-violet-50/50 transition-all flex items-center justify-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4"})," Ajouter un √©v√©nement"]})]}),o==="templates"&&e.jsx("div",{children:G?e.jsx(M,{}):ue.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-12 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-zinc-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(ye,{className:"w-7 h-7 text-zinc-300"})}),e.jsx("p",{className:"text-zinc-500 font-medium",children:"Aucun template disponible"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Les templates facilitent la cr√©ation de posts r√©currents"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ue.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"h-1 rounded-t-2xl",style:{backgroundColor:t.couleur||"#7C3AED"}}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:t.icone||"üìù"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm font-bold text-zinc-900 truncate",children:t.nom}),t.description&&e.jsx("p",{className:"text-sm text-zinc-500 mt-0.5 line-clamp-2",children:t.description})]})]}),t.plateforme&&e.jsxs("div",{className:"flex items-center gap-1.5 mb-3",children:[e.jsx(U,{platform:t.plateforme,size:14}),e.jsx("span",{className:"text-xs text-zinc-500 capitalize",children:t.plateforme})]}),t.contenu&&e.jsx("p",{className:"text-xs text-zinc-400 italic line-clamp-3 mb-3",children:t.contenu}),t.hashtags&&t.hashtags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:(Array.isArray(t.hashtags)?t.hashtags:[]).slice(0,4).map((s,a)=>e.jsxs("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded-full bg-violet-50 text-violet-600 border border-violet-100",children:["#",s]},a))}),e.jsxs("button",{onClick:()=>Ye(t),className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl border-2 border-violet-200 text-violet-600 text-sm font-semibold hover:bg-violet-50 hover:border-violet-300 transition-all",children:[e.jsx(O,{className:"w-4 h-4"})," Utiliser"]})]})]},t.id))})}),o==="analytics"&&e.jsx("div",{className:"space-y-6",children:G?e.jsx(M,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-100 flex items-center justify-center",children:e.jsx(ht,{className:"w-5 h-5 text-violet-600"})}),(r==null?void 0:r.portee_trend)!=null&&e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${r.portee_trend>=0?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-600"}`,children:[r.portee_trend>=0?"+":"",r.portee_trend,"%"]})]}),e.jsx("p",{className:"text-2xl font-bold text-zinc-900",children:((je=r==null?void 0:r.portee_totale)==null?void 0:je.toLocaleString("fr-FR"))??"‚Äî"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-0.5",children:"Port√©e totale"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-100 flex items-center justify-center",children:e.jsx(gt,{className:"w-5 h-5 text-emerald-600"})}),(r==null?void 0:r.interactions_trend)!=null&&e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${r.interactions_trend>=0?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-600"}`,children:[r.interactions_trend>=0?"+":"",r.interactions_trend,"%"]})]}),e.jsx("p",{className:"text-2xl font-bold text-zinc-900",children:((ve=r==null?void 0:r.interactions)==null?void 0:ve.toLocaleString("fr-FR"))??"‚Äî"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-0.5",children:"Interactions"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(bt,{className:"w-5 h-5 text-blue-600"})}),(r==null?void 0:r.abonnes_trend)!=null&&e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${r.abonnes_trend>=0?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-600"}`,children:[r.abonnes_trend>=0?"+":"",r.abonnes_trend,"%"]})]}),e.jsx("p",{className:"text-2xl font-bold text-zinc-900",children:((Ne=r==null?void 0:r.nouveaux_abonnes)==null?void 0:Ne.toLocaleString("fr-FR"))??"‚Äî"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-0.5",children:"Nouveaux abonn√©s"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-5 py-4 border-b border-slate-100",children:e.jsx("h3",{className:"text-sm font-bold text-zinc-900",children:"Performance des posts"})}),he.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-sm text-zinc-400",children:"Aucune donn√©e de performance disponible"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-zinc-50",children:[e.jsx("th",{className:"text-left px-5 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Post"}),e.jsx("th",{className:"text-left px-3 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Plateforme"}),e.jsx("th",{className:"text-left px-3 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"text-right px-3 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Vues"}),e.jsx("th",{className:"text-right px-3 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Likes"}),e.jsx("th",{className:"text-right px-5 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Commentaires"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:he.map((t,s)=>e.jsxs("tr",{className:"hover:bg-zinc-50/50 transition-colors",children:[e.jsx("td",{className:"px-5 py-3",children:e.jsx("span",{className:"font-medium text-zinc-800 truncate block max-w-[200px]",children:t.titre||"Sans titre"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(U,{platform:t.plateforme,size:14}),e.jsx("span",{className:"text-zinc-600 capitalize text-xs",children:t.plateforme})]})}),e.jsx("td",{className:"px-3 py-3 text-zinc-500 text-xs",children:Pe(t.date_publication||t.date_creation)}),e.jsx("td",{className:"px-3 py-3 text-right text-zinc-800 font-medium",children:(t.vues??0).toLocaleString("fr-FR")}),e.jsx("td",{className:"px-3 py-3 text-right text-zinc-800 font-medium",children:(t.likes??0).toLocaleString("fr-FR")}),e.jsx("td",{className:"px-5 py-3 text-right text-zinc-800 font-medium",children:(t.commentaires??0).toLocaleString("fr-FR")})]},t.id||s))})]})})]})]})})]}),I&&e.jsxs("div",{className:`fixed bottom-6 right-6 z-50 flex items-center gap-3 px-5 py-4 rounded-2xl shadow-2xl text-sm font-semibold transition-all animate-in ${I.success?"bg-emerald-600 text-white":"bg-red-600 text-white"}`,children:[I.success?e.jsx(Q,{className:"w-5 h-5 flex-shrink-0"}):e.jsx(Ce,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{children:I.message}),e.jsx("button",{onClick:()=>b(null),className:"ml-2 p-1 rounded-lg hover:bg-white/20 transition-colors",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]})}export{yt as default};
