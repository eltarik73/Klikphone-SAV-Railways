import{j as e,a as x}from"./index-C_zrz2WY.js";import{r as a}from"./vendor-react-DMwujlca.js";import{f as Ze,F as Q,y as et,aD as je,d as tt,aE as st,a4 as X,_ as ve,a as rt,a7 as at,p as Y,q as C,r as Ne,ag as nt,o as O,aF as Se,aG as Pe,aH as Ae,aI as De,aJ as lt,aK as it,Q as ot,O as ct,D as ye,aq as dt,aL as xt,U as mt,X as we}from"./vendor-icons-CffLNJII.js";function W({platform:o,size:m=16}){const d={google:{icon:Se,color:"#16a34a"},instagram:{icon:Pe,color:"#e11d48"},facebook:{icon:Ae,color:"#2563eb"},linkedin:{icon:De,color:"#1d4ed8"}},p=d[o]||d.google;return e.jsx(p.icon,{style:{color:p.color,width:m,height:m}})}function ut({statut:o}){const m={publi√©:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200"},programm√©:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"},brouillon:{bg:"bg-zinc-100",text:"text-zinc-600",border:"border-zinc-200"},erreur:{bg:"bg-red-50",text:"text-red-600",border:"border-red-200"}},d=m[o]||m.brouillon;return e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full border ${d.bg} ${d.text} ${d.border}`,children:o})}function ze(o){const m=[],d=new Date(o);d.setDate(d.getDate()-d.getDay()+1);for(let p=0;p<7;p++){const j=new Date(d);j.setDate(d.getDate()+p),m.push(j)}return m}function ke(o){return o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):""}function ht(o){return new Date(o).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}const Ce=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];function ft(){var be,pe,fe;const[o,m]=a.useState("posts"),[d,p]=a.useState([]),[j,f]=a.useState(!1),[A,Ee]=a.useState(""),[D,Te]=a.useState(""),[S,Z]=a.useState("google"),[N,ee]=a.useState("promo"),[E,T]=a.useState(""),[te,se]=a.useState(!1),[u,_]=a.useState(null),[y,w]=a.useState(""),[$,re]=a.useState(!1),[P,g]=a.useState(!1),[I,H]=a.useState(""),[ae,_e]=a.useState([]),[z,ne]=a.useState(()=>new Date),[$e,q]=a.useState(!1),[c,k]=a.useState({titre:"",type:"post",date:"",heure:"10:00",couleur:"#7C3AED"}),[le,Ie]=a.useState([]),[n,Fe]=a.useState(null),[ie,Le]=a.useState([]),[Ge,B]=a.useState(null),[J,oe]=a.useState(""),[ce,de]=a.useState("10:00"),[xe,F]=a.useState(null),[L,b]=a.useState(null),[G,M]=a.useState(null),v=async()=>{f(!0);try{const t={};A&&(t.plateforme=A),D&&(t.statut=D);const s=await x.getMarketingPosts(t);p(Array.isArray(s)?s:[])}catch(t){console.error("Erreur chargement posts:",t)}finally{f(!1)}},R=async()=>{f(!0);try{const t=ze(z),s=t[0].toISOString().split("T")[0],r=t[6].toISOString().split("T")[0],l=await x.getCalendrierMarketing({date_debut:s,date_fin:r});_e(Array.isArray(l)?l:[])}catch(t){console.error("Erreur chargement calendrier:",t)}finally{f(!1)}},Me=async()=>{f(!0);try{const t=await x.getMarketingTemplates();Ie(Array.isArray(t)?t:[])}catch(t){console.error("Erreur chargement templates:",t)}finally{f(!1)}},Re=async()=>{f(!0);try{const[t,s]=await Promise.all([x.getMarketingAnalytics(),x.getMarketingAnalyticsPosts()]);Fe(t||null),Le(Array.isArray(s)?s:[])}catch(t){console.error("Erreur chargement analytics:",t)}finally{f(!1)}};a.useEffect(()=>{o==="posts"?v():o==="calendrier"?R():o==="templates"?Me():o==="analytics"&&Re()},[o]),a.useEffect(()=>{o==="posts"&&v()},[A,D]),a.useEffect(()=>{o==="calendrier"&&R()},[z]);const Ue=async()=>{if(E.trim()){se(!0);try{const t=await x.genererPost({plateforme:S,type_contenu:N,contexte:E});_(t)}catch(t){console.error("Erreur g√©n√©ration:",t)}finally{se(!1)}}},me=async()=>{const t=I.trim();if(t){re(!0),g(!0),w("");try{const s=await x.genererImage({prompt:t});s.image_url?w(s.image_url):g(!1)}catch(s){console.error("Erreur g√©n√©ration image:",s),g(!1)}finally{re(!1)}}},Oe=async t=>{try{await x.createMarketingPost({titre:t.titre||`Post ${N}`,contenu:t.contenu||"",plateforme:t.plateforme||S,type_contenu:t.type_contenu||N,hashtags:t.hashtags||[],image_url:y||null,statut:"brouillon"}),_(null),T(""),w(""),H(""),v()}catch(s){console.error("Erreur sauvegarde:",s)}},We=async t=>{M(t),b(null);try{const s=await x.publierPost(t),r=s.platforms_published||[],l=s.warning||"",h=l?`${l} (${r.join(", ")})`:`Publi√© sur ${r.join(", ")||"les r√©seaux"}`;b({success:!0,message:h,platforms:r}),v()}catch(s){console.error("Erreur publication:",s);const r=(s==null?void 0:s.message)||"Erreur lors de la publication";b({success:!1,message:r})}finally{M(null),setTimeout(()=>b(null),6e3)}},He=async t=>{M("gen"),b(null);try{const s={titre:t.titre||`Post ${N}`,contenu:t.contenu||"",plateforme:t.plateforme||S,type_contenu:t.type_contenu||N,hashtags:t.hashtags||[],image_url:y||null,statut:"brouillon"},r=await x.createMarketingPost(s);if(r&&r.id){const l=await x.publierPost(r.id),h=l.platforms_published||[],i=l.warning||"",K=i?`${i} (${h.join(", ")})`:`Publi√© sur ${h.join(", ")||"les r√©seaux"}`;b({success:!0,message:K,platforms:h})}_(null),T(""),w(""),H(""),v()}catch(s){console.error("Erreur publication:",s);const r=(s==null?void 0:s.message)||"Erreur lors de la publication";b({success:!1,message:r})}finally{M(null),setTimeout(()=>b(null),6e3)}},qe=async t=>{if(window.confirm("Supprimer ce brouillon ?"))try{await x.deleteMarketingPost(t),v()}catch(s){console.error("Erreur suppression:",s)}},Be=async t=>{if(J)try{await x.programmerPost(t,{date_programmee:`${J}T${ce}:00`}),B(null),oe(""),de("10:00"),v()}catch(s){console.error("Erreur programmation:",s)}},Je=async()=>{if(!(!c.titre.trim()||!c.date))try{await x.createCalendrierEvent({...c,date_heure:`${c.date}T${c.heure}:00`}),k({titre:"",type:"post",date:"",heure:"10:00",couleur:"#7C3AED"}),q(!1),R()}catch(t){console.error("Erreur ajout √©v√©nement:",t)}},ue=async t=>{try{await x.deleteCalendrierEvent(t),R()}catch(s){console.error("Erreur suppression √©v√©nement:",s)}},Ve=t=>{m("posts"),t.plateforme&&Z(t.plateforme),t.type_contenu&&ee(t.type_contenu),T(t.contenu||t.description||""),_(null)};async function he(t,s){try{await navigator.clipboard.writeText(t),F(s),setTimeout(()=>F(null),2e3)}catch{const l=document.createElement("textarea");l.value=t,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),F(s),setTimeout(()=>F(null),2e3)}}function ge(t){let s=t.contenu||"";const r=Array.isArray(t.hashtags)?t.hashtags:[];return r.length>0&&(s+=`

`+r.map(l=>l.startsWith("#")?l:`#${l}`).join(" ")),s}const V=a.useMemo(()=>ze(z),[z]),Ke=()=>{const t=new Date(z);t.setDate(t.getDate()-7),ne(t)},Qe=()=>{const t=new Date(z);t.setDate(t.getDate()+7),ne(t)},Xe=[{id:"posts",label:"Posts",icon:Q},{id:"calendrier",label:"Calendrier",icon:et},{id:"templates",label:"Templates",icon:je},{id:"analytics",label:"Analytics",icon:tt}],Ye=[{id:"google",icon:Se,label:"Google"},{id:"instagram",icon:Pe,label:"Instagram"},{id:"facebook",icon:Ae,label:"Facebook"},{id:"linkedin",icon:De,label:"LinkedIn"}],U=()=>e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"w-8 h-8 border-2 border-violet-600 border-t-transparent rounded-full animate-spin"})});return e.jsxs("div",{className:"min-h-screen bg-zinc-50 pb-20",children:[e.jsx("div",{className:"sticky top-0 z-30 bg-white border-b border-slate-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 py-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-100 flex items-center justify-center shrink-0",children:e.jsx(Ze,{className:"w-5 h-5 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-zinc-900 tracking-tight",children:"Community Manager"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"G√©rez vos r√©seaux sociaux et votre pr√©sence en ligne"})]})]}),e.jsx("div",{className:"flex items-center gap-1 bg-zinc-100 rounded-xl p-1",children:Xe.map(({id:t,label:s,icon:r})=>e.jsxs("button",{onClick:()=>m(t),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all ${o===t?"bg-violet-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 hover:bg-white"}`,children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:s})]},t))})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[o==="posts"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{value:A,onChange:t=>Ee(t.target.value),className:"px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500",children:[e.jsx("option",{value:"",children:"Toutes les plateformes"}),e.jsx("option",{value:"google",children:"Google"}),e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"})]}),e.jsxs("select",{value:D,onChange:t=>Te(t.target.value),className:"px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500",children:[e.jsx("option",{value:"",children:"Tous les statuts"}),e.jsx("option",{value:"brouillon",children:"Brouillon"}),e.jsx("option",{value:"programm√©",children:"Programm√©"}),e.jsx("option",{value:"publi√©",children:"Publi√©"}),e.jsx("option",{value:"erreur",children:"Erreur"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 px-4 py-3 rounded-xl bg-blue-50 border border-blue-200",children:[e.jsx(st,{className:"w-4 h-4 text-blue-500 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("span",{className:"font-semibold",children:"Publication :"})," Quand vous publiez un post, le contenu est copi√© automatiquement et vous pouvez le coller directement sur la plateforme choisie."]})]}),j?e.jsx(U,{}):d.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-12 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-zinc-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(Q,{className:"w-7 h-7 text-zinc-300"})}),e.jsx("p",{className:"text-zinc-500 font-medium",children:"Aucun post trouv√©"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Utilisez le g√©n√©rateur IA pour cr√©er votre premier post"})]}):e.jsx("div",{className:"space-y-3",children:d.map(t=>e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{platform:t.plateforme,size:18}),e.jsx("span",{className:"text-sm font-semibold text-zinc-900 flex-1 truncate",children:t.titre||"Sans titre"}),e.jsx(ut,{statut:t.statut})]}),t.image_url&&e.jsx("div",{className:"mb-2 rounded-lg overflow-hidden border border-slate-100",children:e.jsx("img",{src:t.image_url,alt:"",className:"w-full h-28 object-cover",loading:"lazy",onError:s=>{s.target.style.display="none"}})}),t.contenu&&e.jsx("p",{className:"text-sm text-zinc-600 line-clamp-2 mb-3",children:t.contenu}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[t.date_creation&&e.jsx("span",{className:"text-xs text-zinc-400 shrink-0",children:ke(t.date_creation)}),t.hashtags&&t.hashtags.length>0&&e.jsxs("div",{className:"flex items-center gap-1 overflow-hidden",children:[(Array.isArray(t.hashtags)?t.hashtags:[]).slice(0,3).map((s,r)=>e.jsxs("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded-full bg-violet-50 text-violet-600 border border-violet-100 truncate",children:["#",s]},r)),Array.isArray(t.hashtags)&&t.hashtags.length>3&&e.jsxs("span",{className:"text-[10px] text-zinc-400",children:["+",t.hashtags.length-3]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>he(ge(t),`post-${t.id}`),className:"p-1.5 rounded-lg hover:bg-zinc-100 text-zinc-400 hover:text-zinc-600 transition-colors",title:"Copier",children:xe===`post-${t.id}`?e.jsx(X,{className:"w-4 h-4 text-emerald-500"}):e.jsx(ve,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 rounded-lg hover:bg-zinc-100 text-zinc-400 hover:text-zinc-600 transition-colors",title:"Voir",children:e.jsx(rt,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 rounded-lg hover:bg-zinc-100 text-zinc-400 hover:text-zinc-600 transition-colors",title:"Modifier",children:e.jsx(at,{className:"w-4 h-4"})}),t.statut==="brouillon"&&e.jsx("button",{onClick:()=>qe(t.id),className:"p-1.5 rounded-lg hover:bg-red-50 text-zinc-400 hover:text-red-500 transition-colors",title:"Supprimer",children:e.jsx(Y,{className:"w-4 h-4"})})]})]}),t.statut==="brouillon"&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-100",children:[e.jsx("button",{onClick:()=>We(t.id),disabled:G===t.id,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-50 text-emerald-700 text-xs font-semibold hover:bg-emerald-100 transition-colors disabled:opacity-50",children:G===t.id?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-3.5 h-3.5 animate-spin"})," Publication..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-3.5 h-3.5"})," Publier via Late"]})}),Ge===t.id?e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("input",{type:"date",value:J,onChange:s=>oe(s.target.value),className:"px-2 py-1.5 rounded-lg border border-slate-200 text-xs focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"}),e.jsx("input",{type:"time",value:ce,onChange:s=>de(s.target.value),className:"px-2 py-1.5 rounded-lg border border-slate-200 text-xs focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"}),e.jsx("button",{onClick:()=>Be(t.id),className:"px-2 py-1.5 rounded-lg bg-blue-600 text-white text-xs font-semibold hover:bg-blue-700 transition-colors",children:"OK"}),e.jsx("button",{onClick:()=>B(null),className:"px-2 py-1.5 rounded-lg text-xs text-zinc-500 hover:text-zinc-700",children:"Annuler"})]}):e.jsxs("button",{onClick:()=>B(t.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-blue-50 text-blue-700 text-xs font-semibold hover:bg-blue-100 transition-colors",children:[e.jsx(nt,{className:"w-3.5 h-3.5"})," Programmer"]})]})]},t.id))})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"bg-violet-50 rounded-2xl border border-violet-200 shadow-sm p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(O,{className:"w-5 h-5 text-violet-600"}),e.jsx("h2",{className:"text-base font-bold text-zinc-900",children:"G√©n√©rer un post"})]}),e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-2",children:"Plateforme"}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:Ye.map(({id:t,icon:s,label:r})=>e.jsxs("button",{onClick:()=>Z(t),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium transition-all border ${S===t?"bg-violet-600 text-white border-violet-600 shadow-sm":"bg-white text-zinc-600 border-slate-200 hover:border-violet-300"}`,title:r,children:[e.jsx(s,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:r})]},t))}),e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-2",children:"Type de contenu"}),e.jsxs("select",{value:N,onChange:t=>ee(t.target.value),className:"w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 mb-4 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500",children:[e.jsx("option",{value:"promo",children:"Promo"}),e.jsx("option",{value:"actualite",children:"Actualit√©"}),e.jsx("option",{value:"conseil",children:"Conseil"}),e.jsx("option",{value:"temoignage",children:"T√©moignage"}),e.jsx("option",{value:"stats",children:"Stats"})]}),e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-2",children:"Contexte"}),e.jsx("textarea",{value:E,onChange:t=>T(t.target.value),placeholder:"D√©crivez le contexte du post...",rows:4,className:"w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 resize-none mb-4 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 placeholder:text-zinc-400"}),e.jsxs("label",{className:"block text-xs font-semibold text-zinc-600 mb-2",children:["Image ",e.jsx("span",{className:"text-zinc-400 font-normal",children:"(obligatoire pour Instagram)"})]}),e.jsx("div",{className:"mb-4",children:y?e.jsxs("div",{className:"relative rounded-xl overflow-hidden border border-slate-200 bg-zinc-50",children:[P&&e.jsxs("div",{className:"w-full h-52 flex flex-col items-center justify-center gap-2 bg-gradient-to-br from-violet-50 to-indigo-50",children:[e.jsx(C,{className:"w-8 h-8 animate-spin text-violet-500"}),e.jsx("span",{className:"text-xs text-violet-600 font-medium",children:"G√©n√©ration en cours..."}),e.jsx("span",{className:"text-[10px] text-zinc-400",children:"Peut prendre 10-30 secondes"})]}),e.jsx("img",{src:y,alt:"Aper√ßu",className:`w-full h-52 object-cover ${P?"hidden":""}`,onLoad:()=>g(!1),onError:t=>{g(!1),t.target.src="",t.target.className="hidden"}}),!P&&e.jsxs("div",{className:"absolute bottom-0 inset-x-0 flex gap-1.5 p-2 bg-gradient-to-t from-black/60 to-transparent",children:[e.jsxs("button",{onClick:me,disabled:$||!I.trim(),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-white/90 text-zinc-700 text-xs font-semibold hover:bg-white transition-colors",children:[$?e.jsx(C,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(O,{className:"w-3.5 h-3.5"}),"R√©g√©n√©rer"]}),e.jsxs("button",{onClick:()=>{w(""),g(!1)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-white/90 text-red-600 text-xs font-semibold hover:bg-white transition-colors",children:[e.jsx(it,{className:"w-3.5 h-3.5"})," Changer"]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:I,onChange:t=>H(t.target.value),placeholder:"D√©crivez l'image souhait√©e... Ex: iPhone 15 Pro pos√© sur un bureau en bois avec des outils de r√©paration",rows:2,className:"w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 resize-none focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 placeholder:text-zinc-400"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:me,disabled:$||!I.trim(),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-gradient-to-r from-violet-600 to-indigo-600 text-white text-sm font-semibold hover:from-violet-700 hover:to-indigo-700 disabled:opacity-50 transition-all shadow-sm",children:$?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 animate-spin"})," G√©n√©ration IA..."]}):e.jsxs(e.Fragment,{children:[e.jsx(lt,{className:"w-4 h-4"})," G√©n√©rer l'image"]})}),e.jsx("span",{className:"flex items-center text-xs text-zinc-400",children:"ou"}),e.jsx("input",{type:"url",onChange:t=>{w(t.target.value),g(!0)},placeholder:"Coller URL Midjourney",className:"w-44 px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm text-zinc-700 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 placeholder:text-zinc-400"})]})]})}),e.jsx("button",{onClick:Ue,disabled:te||!E.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-violet-600 text-white font-semibold text-sm hover:bg-violet-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm",children:te?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"G√©n√©ration en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4"}),"G√©n√©rer avec l'IA"]})})]}),u&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 animate-in",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(W,{platform:u.plateforme||S,size:18}),e.jsx("span",{className:"text-sm font-bold text-zinc-900",children:u.titre||"Post g√©n√©r√©"})]}),e.jsx("p",{className:"text-sm text-zinc-600 mb-3 whitespace-pre-wrap",children:u.contenu}),y&&e.jsxs("div",{className:"mb-3 rounded-xl overflow-hidden border border-slate-200 bg-zinc-50",children:[P&&e.jsx("div",{className:"w-full h-32 flex items-center justify-center bg-violet-50",children:e.jsx(C,{className:"w-5 h-5 animate-spin text-violet-500"})}),e.jsx("img",{src:y,alt:"Image du post",className:`w-full h-32 object-cover ${P?"hidden":""}`,onLoad:()=>g(!1),onError:t=>{g(!1),t.target.className="hidden"}})]}),u.hashtags&&u.hashtags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-4",children:(Array.isArray(u.hashtags)?u.hashtags:[]).map((t,s)=>e.jsxs("span",{className:"text-[11px] font-medium px-2 py-0.5 rounded-full bg-violet-50 text-violet-600 border border-violet-100",children:["#",t]},s))}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:()=>Oe(u),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl bg-violet-600 text-white text-sm font-semibold hover:bg-violet-700 transition-colors",children:[e.jsx(Q,{className:"w-4 h-4"}),"Sauvegarder en brouillon"]}),e.jsx("button",{onClick:()=>He(u),disabled:G==="gen",className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl bg-emerald-600 text-white text-sm font-semibold hover:bg-emerald-700 transition-colors disabled:opacity-50",children:G==="gen"?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 animate-spin"})," Publication..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4"})," Publier maintenant"]})}),e.jsx("button",{onClick:()=>he(ge(u),"gen-copy"),className:"flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl border-2 border-slate-200 text-zinc-600 text-sm font-medium hover:bg-zinc-50 transition-colors",children:xe==="gen-copy"?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 text-emerald-500"})," Copi√© !"]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4"})," Copier"]})})]})]})]})]}),o==="calendrier"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-5 py-3",children:[e.jsx("button",{onClick:Ke,className:"p-2 rounded-lg hover:bg-zinc-100 text-zinc-500 hover:text-zinc-700 transition-colors",children:e.jsx(ot,{className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-sm font-bold text-zinc-900",children:["Semaine du ",ht(V[0])]}),e.jsx("button",{onClick:Qe,className:"p-2 rounded-lg hover:bg-zinc-100 text-zinc-500 hover:text-zinc-700 transition-colors",children:e.jsx(ct,{className:"w-5 h-5"})})]}),j?e.jsx(U,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:grid grid-cols-7 gap-2",children:V.map((t,s)=>{const r=t.toISOString().split("T")[0],l=new Date().toISOString().split("T")[0]===r,h=ae.filter(i=>(i.date_heure||i.date||"").split("T")[0]===r);return e.jsxs("div",{className:`bg-white rounded-xl border shadow-sm min-h-[180px] ${l?"border-violet-300 ring-1 ring-violet-100":"border-slate-200"}`,children:[e.jsxs("div",{className:`px-3 py-2 border-b text-center ${l?"bg-violet-50 border-violet-100":"bg-zinc-50 border-slate-100"}`,children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-500",children:Ce[s]}),e.jsx("div",{className:`text-lg font-bold ${l?"text-violet-600":"text-zinc-900"}`,children:t.getDate()})]}),e.jsx("div",{className:"p-2 space-y-1.5",children:h.map(i=>e.jsxs("div",{className:"group relative rounded-lg p-2 text-xs bg-zinc-50 hover:bg-zinc-100 transition-colors",style:{borderLeft:`3px solid ${i.couleur||"#7C3AED"}`},children:[e.jsx("div",{className:"font-semibold text-zinc-800 truncate",children:i.titre}),i.heure&&e.jsx("div",{className:"text-zinc-400 mt-0.5",children:i.heure}),i.type&&e.jsx("span",{className:"inline-block mt-1 text-[9px] font-bold px-1.5 py-0.5 rounded-full bg-violet-50 text-violet-600 border border-violet-100",children:i.type}),e.jsx("button",{onClick:()=>ue(i.id),className:"absolute top-1 right-1 p-0.5 rounded opacity-0 group-hover:opacity-100 hover:bg-red-100 text-zinc-400 hover:text-red-500 transition-all",children:e.jsx(Y,{className:"w-3 h-3"})})]},i.id))})]},s)})}),e.jsx("div",{className:"md:hidden space-y-2",children:V.map((t,s)=>{const r=t.toISOString().split("T")[0],l=new Date().toISOString().split("T")[0]===r,h=ae.filter(i=>(i.date_heure||i.date||"").split("T")[0]===r);return e.jsxs("div",{className:`bg-white rounded-xl border shadow-sm p-3 ${l?"border-violet-300":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`text-sm font-bold ${l?"text-violet-600":"text-zinc-900"}`,children:[Ce[s]," ",t.getDate()]}),l&&e.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-violet-100 text-violet-600",children:"Aujourd'hui"})]}),h.length===0?e.jsx("p",{className:"text-xs text-zinc-400 italic",children:"Aucun √©v√©nement"}):e.jsx("div",{className:"space-y-1.5",children:h.map(i=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg p-2 bg-zinc-50",style:{borderLeft:`3px solid ${i.couleur||"#7C3AED"}`},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-800",children:i.titre}),e.jsxs("div",{className:"text-[10px] text-zinc-400",children:[i.heure," ",i.type&&`¬∑ ${i.type}`]})]}),e.jsx("button",{onClick:()=>ue(i.id),className:"p-1 rounded hover:bg-red-100 text-zinc-400 hover:text-red-500 transition-colors",children:e.jsx(Y,{className:"w-3.5 h-3.5"})})]},i.id))})]},s)})})]}),$e?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5",children:[e.jsx("h3",{className:"text-sm font-bold text-zinc-900 mb-4",children:"Ajouter un √©v√©nement"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Titre"}),e.jsx("input",{type:"text",value:c.titre,onChange:t=>k({...c,titre:t.target.value}),placeholder:"Titre de l'√©v√©nement",className:"w-full px-3 py-2 rounded-xl border border-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Type"}),e.jsxs("select",{value:c.type,onChange:t=>k({...c,type:t.target.value}),className:"w-full px-3 py-2 rounded-xl border border-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500",children:[e.jsx("option",{value:"post",children:"Post"}),e.jsx("option",{value:"story",children:"Story"}),e.jsx("option",{value:"campagne",children:"Campagne"}),e.jsx("option",{value:"evenement",children:"√âv√©nement"}),e.jsx("option",{value:"autre",children:"Autre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:c.date,onChange:t=>k({...c,date:t.target.value}),className:"w-full px-3 py-2 rounded-xl border border-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Heure"}),e.jsx("input",{type:"time",value:c.heure,onChange:t=>k({...c,heure:t.target.value}),className:"w-full px-3 py-2 rounded-xl border border-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-600 mb-1",children:"Couleur"}),e.jsx("div",{className:"flex items-center gap-2",children:["#7C3AED","#2563eb","#16a34a","#e11d48","#ea580c","#0891b2"].map(t=>e.jsx("button",{onClick:()=>k({...c,couleur:t}),className:`w-7 h-7 rounded-full border-2 transition-all ${c.couleur===t?"border-zinc-900 scale-110":"border-transparent"}`,style:{backgroundColor:t}},t))})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsxs("button",{onClick:Je,disabled:!c.titre.trim()||!c.date,className:"flex items-center gap-1.5 px-4 py-2 rounded-xl bg-violet-600 text-white text-sm font-semibold hover:bg-violet-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(ye,{className:"w-4 h-4"})," Ajouter"]}),e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 rounded-xl text-sm text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100 transition-colors",children:"Annuler"})]})]}):e.jsxs("button",{onClick:()=>q(!0),className:"w-full py-3 rounded-2xl border-2 border-dashed border-slate-300 text-sm font-semibold text-zinc-500 hover:border-violet-400 hover:text-violet-600 hover:bg-violet-50/50 transition-all flex items-center justify-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4"})," Ajouter un √©v√©nement"]})]}),o==="templates"&&e.jsx("div",{children:j?e.jsx(U,{}):le.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-12 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-zinc-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(je,{className:"w-7 h-7 text-zinc-300"})}),e.jsx("p",{className:"text-zinc-500 font-medium",children:"Aucun template disponible"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Les templates facilitent la cr√©ation de posts r√©currents"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:le.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"h-1 rounded-t-2xl",style:{backgroundColor:t.couleur||"#7C3AED"}}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:t.icone||"üìù"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm font-bold text-zinc-900 truncate",children:t.nom}),t.description&&e.jsx("p",{className:"text-sm text-zinc-500 mt-0.5 line-clamp-2",children:t.description})]})]}),t.plateforme&&e.jsxs("div",{className:"flex items-center gap-1.5 mb-3",children:[e.jsx(W,{platform:t.plateforme,size:14}),e.jsx("span",{className:"text-xs text-zinc-500 capitalize",children:t.plateforme})]}),t.contenu&&e.jsx("p",{className:"text-xs text-zinc-400 italic line-clamp-3 mb-3",children:t.contenu}),t.hashtags&&t.hashtags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:(Array.isArray(t.hashtags)?t.hashtags:[]).slice(0,4).map((s,r)=>e.jsxs("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded-full bg-violet-50 text-violet-600 border border-violet-100",children:["#",s]},r))}),e.jsxs("button",{onClick:()=>Ve(t),className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl border-2 border-violet-200 text-violet-600 text-sm font-semibold hover:bg-violet-50 hover:border-violet-300 transition-all",children:[e.jsx(O,{className:"w-4 h-4"})," Utiliser"]})]})]},t.id))})}),o==="analytics"&&e.jsx("div",{className:"space-y-6",children:j?e.jsx(U,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-100 flex items-center justify-center",children:e.jsx(dt,{className:"w-5 h-5 text-violet-600"})}),(n==null?void 0:n.portee_trend)!=null&&e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${n.portee_trend>=0?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-600"}`,children:[n.portee_trend>=0?"+":"",n.portee_trend,"%"]})]}),e.jsx("p",{className:"text-2xl font-bold text-zinc-900",children:((be=n==null?void 0:n.portee_totale)==null?void 0:be.toLocaleString("fr-FR"))??"‚Äî"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-0.5",children:"Port√©e totale"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-100 flex items-center justify-center",children:e.jsx(xt,{className:"w-5 h-5 text-emerald-600"})}),(n==null?void 0:n.interactions_trend)!=null&&e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${n.interactions_trend>=0?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-600"}`,children:[n.interactions_trend>=0?"+":"",n.interactions_trend,"%"]})]}),e.jsx("p",{className:"text-2xl font-bold text-zinc-900",children:((pe=n==null?void 0:n.interactions)==null?void 0:pe.toLocaleString("fr-FR"))??"‚Äî"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-0.5",children:"Interactions"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(mt,{className:"w-5 h-5 text-blue-600"})}),(n==null?void 0:n.abonnes_trend)!=null&&e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${n.abonnes_trend>=0?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-600"}`,children:[n.abonnes_trend>=0?"+":"",n.abonnes_trend,"%"]})]}),e.jsx("p",{className:"text-2xl font-bold text-zinc-900",children:((fe=n==null?void 0:n.nouveaux_abonnes)==null?void 0:fe.toLocaleString("fr-FR"))??"‚Äî"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-0.5",children:"Nouveaux abonn√©s"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-5 py-4 border-b border-slate-100",children:e.jsx("h3",{className:"text-sm font-bold text-zinc-900",children:"Performance des posts"})}),ie.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-sm text-zinc-400",children:"Aucune donn√©e de performance disponible"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-zinc-50",children:[e.jsx("th",{className:"text-left px-5 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Post"}),e.jsx("th",{className:"text-left px-3 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Plateforme"}),e.jsx("th",{className:"text-left px-3 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"text-right px-3 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Vues"}),e.jsx("th",{className:"text-right px-3 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Likes"}),e.jsx("th",{className:"text-right px-5 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Commentaires"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:ie.map((t,s)=>e.jsxs("tr",{className:"hover:bg-zinc-50/50 transition-colors",children:[e.jsx("td",{className:"px-5 py-3",children:e.jsx("span",{className:"font-medium text-zinc-800 truncate block max-w-[200px]",children:t.titre||"Sans titre"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(W,{platform:t.plateforme,size:14}),e.jsx("span",{className:"text-zinc-600 capitalize text-xs",children:t.plateforme})]})}),e.jsx("td",{className:"px-3 py-3 text-zinc-500 text-xs",children:ke(t.date_publication||t.date_creation)}),e.jsx("td",{className:"px-3 py-3 text-right text-zinc-800 font-medium",children:(t.vues??0).toLocaleString("fr-FR")}),e.jsx("td",{className:"px-3 py-3 text-right text-zinc-800 font-medium",children:(t.likes??0).toLocaleString("fr-FR")}),e.jsx("td",{className:"px-5 py-3 text-right text-zinc-800 font-medium",children:(t.commentaires??0).toLocaleString("fr-FR")})]},t.id||s))})]})})]})]})})]}),L&&e.jsxs("div",{className:`fixed bottom-6 right-6 z-50 flex items-center gap-3 px-5 py-4 rounded-2xl shadow-2xl text-sm font-semibold transition-all animate-in ${L.success?"bg-emerald-600 text-white":"bg-red-600 text-white"}`,children:[L.success?e.jsx(X,{className:"w-5 h-5 flex-shrink-0"}):e.jsx(we,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{children:L.message}),e.jsx("button",{onClick:()=>b(null),className:"ml-2 p-1 rounded-lg hover:bg-white/20 transition-colors",children:e.jsx(we,{className:"w-4 h-4"})})]})]})}export{ft as default};
